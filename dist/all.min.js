!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(w,t){"use strict";function g(t){return null!=t&&t===t.window}var e=[],n=Object.getPrototypeOf,s=e.slice,v=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},c=e.push,r=e.indexOf,i={},o=i.toString,y=i.hasOwnProperty,a=y.toString,h=a.call(Object),m={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},S=w.document,l={type:!0,src:!0,nonce:!0,noModule:!0};function x(t,e,i){var n,r,o=(i=i||S).createElement("script");if(o.text=t,e)for(n in l)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function K(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[o.call(t)]||"object":typeof t}var u="3.5.1",C=function(t,e){return new C.fn.init(t,e)};function d(t){var e=!!t&&"length"in t&&t.length,i=K(t);return!_(t)&&!g(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}C.fn=C.prototype={jquery:u,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return C.each(this,t)},map:function(i){return this.pushStack(C.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:e.sort,splice:e.splice},C.extend=C.fn.extend=function(){var t,e,i,n,r,o,a=arguments[0]||{},s=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||_(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&a!==n&&(h&&n&&(C.isPlainObject(n)||(r=Array.isArray(n)))?(i=a[e],o=r&&!Array.isArray(i)?[]:r||C.isPlainObject(i)?i:{},r=!1,a[e]=C.extend(h,o,n)):void 0!==n&&(a[e]=n));return a},C.extend({expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==o.call(t)||(e=n(t))&&("function"!=typeof(i=y.call(e,"constructor")&&e.constructor)||a.call(i)!==h))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){x(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(d(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(d(Object(t))?C.merge(i,"string"==typeof t?[t]:t):c.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:r.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;r<o;r++)!e(t[r],r)!=a&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,a=[];if(d(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&a.push(r);return v(a)},guid:1,support:m}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=e[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var f=function(i){function u(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320))}function r(){b()}var t,f,x,o,a,p,d,g,K,c,h,b,w,s,S,v,l,y,m,C="sizzle"+ +new Date,_=i.document,T=0,n=0,k=ct(),F=ct(),A=ct(),D=ct(),P=function(t,e){return t===e&&(h=!0),0},L={}.hasOwnProperty,e=[],M=e.pop,N=e.push,E=e.push,j=e.slice,R=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},G="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",O="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\["+I+"*("+O+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+I+"*\\]",B=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",W=new RegExp(I+"+","g"),U=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),q=new RegExp("^"+I+"*,"+I+"*"),$=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),z=new RegExp(I+"|>"),X=new RegExp(B),Y=new RegExp("^"+O+"$"),V={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+G+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,it=/[+~]/,nt=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=mt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{E.apply(e=j.call(_.childNodes),_.childNodes),e[_.childNodes.length].nodeType}catch(t){E={apply:e.length?function(t,e){N.apply(t,j.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function st(t,e,i,n){var r,o,a,s,c,h,l,u=e&&e.ownerDocument,d=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return i;if(!n&&(b(e),e=e||w,S)){if(11!==d&&(c=et.exec(t)))if(r=c[1]){if(9===d){if(!(a=e.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(u&&(a=u.getElementById(r))&&m(e,a)&&a.id===r)return i.push(a),i}else{if(c[2])return E.apply(i,e.getElementsByTagName(t)),i;if((r=c[3])&&f.getElementsByClassName&&e.getElementsByClassName)return E.apply(i,e.getElementsByClassName(r)),i}if(f.qsa&&!D[t+" "]&&(!v||!v.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(l=t,u=e,1===d&&(z.test(t)||$.test(t))){for((u=it.test(t)&&gt(e.parentNode)||e)===e&&f.scope||((s=e.getAttribute("id"))?s=s.replace(rt,ot):e.setAttribute("id",s=C)),o=(h=p(t)).length;o--;)h[o]=(s?"#"+s:":scope")+" "+yt(h[o]);l=h.join(",")}try{return E.apply(i,u.querySelectorAll(l)),i}catch(e){D(t,!0)}finally{s===C&&e.removeAttribute("id")}}}return g(t.replace(U,"$1"),e,i,n)}function ct(){var n=[];return function t(e,i){return n.push(e+" ")>x.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function ht(t){return t[C]=!0,t}function lt(t){var e=w.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ft(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&at(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pt(a){return ht(function(o){return o=+o,ht(function(t,e){for(var i,n=a([],t.length,o),r=n.length;r--;)t[i=n[r]]&&(t[i]=!(e[i]=t[i]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in f=st.support={},a=st.isXML=function(t){var e=t.namespaceURI,i=(t.ownerDocument||t).documentElement;return!Q.test(e||i&&i.nodeName||"HTML")},b=st.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:_;return n!=w&&9===n.nodeType&&n.documentElement&&(s=(w=n).documentElement,S=!a(w),_!=w&&(i=w.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",r,!1):i.attachEvent&&i.attachEvent("onunload",r)),f.scope=lt(function(t){return s.appendChild(t).appendChild(w.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),f.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=lt(function(t){return t.appendChild(w.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=tt.test(w.getElementsByClassName),f.getById=lt(function(t){return s.appendChild(t).id=C,!w.getElementsByName||!w.getElementsByName(C).length}),f.getById?(x.filter.ID=function(t){var e=t.replace(nt,u);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var i=e.getElementById(t);return i?[i]:[]}}):(x.filter.ID=function(t){var i=t.replace(nt,u);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&S){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),x.find.TAG=f.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},x.find.CLASS=f.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&S)return e.getElementsByClassName(t)},l=[],v=[],(f.qsa=tt.test(w.querySelectorAll))&&(lt(function(t){var e;s.appendChild(t).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+G+")"),t.querySelectorAll("[id~="+C+"-]").length||v.push("~="),(e=w.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+C+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=w.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+I+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),s.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(f.matchesSelector=tt.test(y=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&lt(function(t){f.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),l.push("!=",B)}),v=v.length&&new RegExp(v.join("|")),l=l.length&&new RegExp(l.join("|")),e=tt.test(s.compareDocumentPosition),m=e||tt.test(s.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===i?t==w||t.ownerDocument==_&&m(_,t)?-1:e==w||e.ownerDocument==_&&m(_,e)?1:c?R(c,t)-R(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t==w?-1:e==w?1:r?-1:o?1:c?R(c,t)-R(c,e):0;if(r===o)return dt(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?dt(a[n],s[n]):a[n]==_?-1:s[n]==_?1:0}),w},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(b(t),f.matchesSelector&&S&&!D[e+" "]&&(!l||!l.test(e))&&(!v||!v.test(e)))try{var i=y.call(t,e);if(i||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){D(e,!0)}return 0<st(e,w,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=w&&b(t),m(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=w&&b(t);var i=x.attrHandle[e.toLowerCase()],n=i&&L.call(x.attrHandle,e.toLowerCase())?i(t,e,!S):void 0;return void 0!==n?n:f.attributes||!S?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},st.escape=function(t){return(t+"").replace(rt,ot)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],n=0,r=0;if(h=!f.detectDuplicates,c=!f.sortStable&&t.slice(0),t.sort(P),h){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return c=null,t},o=st.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(x=st.selectors={cacheLength:50,createPseudo:ht,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,u),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,u),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&X.test(i)&&(e=p(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,u).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+I+")"+t+"("+I+"|$)"))&&k(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(t){var e=st.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(W," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,g,v){var y="nth"!==p.slice(0,3),m="last"!==p.slice(-4),_="of-type"===t;return 1===g&&0===v?function(t){return!!t.parentNode}:function(t,e,i){var n,r,o,a,s,c,h=y!=m?"nextSibling":"previousSibling",l=t.parentNode,u=_&&t.nodeName.toLowerCase(),d=!i&&!_,f=!1;if(l){if(y){for(;h;){for(a=t;a=a[h];)if(_?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;c=h="only"===p&&!c&&"nextSibling"}return!0}if(c=[m?l.firstChild:l.lastChild],m&&d){for(f=(s=(n=(r=(o=(a=l)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===T&&n[1])&&n[2],a=s&&l.childNodes[s];a=++s&&a&&a[h]||(f=s=0)||c.pop();)if(1===a.nodeType&&++f&&a===t){r[p]=[T,s,f];break}}else if(d&&(f=s=(n=(r=(o=(a=t)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]||[])[0]===T&&n[1]),!1===f)for(;(a=++s&&a&&a[h]||(f=s=0)||c.pop())&&((_?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++f||(d&&((r=(o=a[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[p]=[T,f]),a!==t)););return(f-=v)===g||f%g==0&&0<=f/g}}},PSEUDO:function(t,o){var e,a=x.pseudos[t]||x.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return a[C]?a(o):1<a.length?(e=[t,t,"",o],x.setFilters.hasOwnProperty(t.toLowerCase())?ht(function(t,e){for(var i,n=a(t,o),r=n.length;r--;)t[i=R(t,n[r])]=!(e[i]=n[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:ht(function(t){var n=[],r=[],s=d(t.replace(U,"$1"));return s[C]?ht(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,i){return n[0]=t,s(n,null,i,r),n[0]=null,!r.pop()}}),has:ht(function(e){return function(t){return 0<st(e,t).length}}),contains:ht(function(e){return e=e.replace(nt,u),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:ht(function(i){return Y.test(i||"")||st.error("unsupported lang: "+i),i=i.replace(nt,u).toLowerCase(),function(t){var e;do{if(e=S?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===s},focus:function(t){return t===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,i){return[i<0?i+e:i]}),even:pt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:pt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:pt(function(t,e,i){for(var n=i<0?i+e:e<i?e:i;0<=--n;)t.push(n);return t}),gt:pt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})x.pseudos[t]=function(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}(t);function vt(){}function yt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function mt(s,t,e){var c=t.dir,h=t.next,l=h||c,u=e&&"parentNode"===l,d=n++;return t.first?function(t,e,i){for(;t=t[c];)if(1===t.nodeType||u)return s(t,e,i);return!1}:function(t,e,i){var n,r,o,a=[T,d];if(i){for(;t=t[c];)if((1===t.nodeType||u)&&s(t,e,i))return!0}else for(;t=t[c];)if(1===t.nodeType||u)if(r=(o=t[C]||(t[C]={}))[t.uniqueID]||(o[t.uniqueID]={}),h&&h===t.nodeName.toLowerCase())t=t[c]||t;else{if((n=r[l])&&n[0]===T&&n[1]===d)return a[2]=n[2];if((r[l]=a)[2]=s(t,e,i))return!0}return!1}}function _t(r){return 1<r.length?function(t,e,i){for(var n=r.length;n--;)if(!r[n](t,e,i))return!1;return!0}:r[0]}function xt(t,e,i,n,r){for(var o,a=[],s=0,c=t.length,h=null!=e;s<c;s++)(o=t[s])&&(i&&!i(o,n,r)||(a.push(o),h&&e.push(s)));return a}function Kt(t){for(var r,e,i,n=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,c=mt(function(t){return t===r},a,!0),h=mt(function(t){return-1<R(r,t)},a,!0),l=[function(t,e,i){var n=!o&&(i||e!==K)||((r=e).nodeType?c:h)(t,e,i);return r=null,n}];s<n;s++)if(e=x.relative[t[s].type])l=[mt(_t(l),e)];else{if((e=x.filter[t[s].type].apply(null,t[s].matches))[C]){for(i=++s;i<n&&!x.relative[t[i].type];i++);return function t(f,p,g,v,y,e){return v&&!v[C]&&(v=t(v)),y&&!y[C]&&(y=t(y,e)),ht(function(t,e,i,n){var r,o,a,s=[],c=[],h=e.length,l=t||function(t,e,i){for(var n=0,r=e.length;n<r;n++)st(t,e[n],i);return i}(p||"*",i.nodeType?[i]:i,[]),u=!f||!t&&p?l:xt(l,s,f,i,n),d=g?y||(t?f:h||v)?[]:e:u;if(g&&g(u,d,i,n),v)for(r=xt(d,c),v(r,[],i,n),o=r.length;o--;)(a=r[o])&&(d[c[o]]=!(u[c[o]]=a));if(t){if(y||f){if(y){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(u[o]=a);y(null,d=[],r,n)}for(o=d.length;o--;)(a=d[o])&&-1<(r=y?R(t,a):s[o])&&(t[r]=!(e[r]=a))}}else d=xt(d===e?d.splice(h,d.length):d),y?y(null,e,d,n):E.apply(e,d)})}(1<s&&_t(l),1<s&&yt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(U,"$1"),e,s<i&&Kt(t.slice(s,i)),i<n&&Kt(t=t.slice(i)),i<n&&yt(t))}l.push(e)}return _t(l)}return vt.prototype=x.filters=x.pseudos,x.setFilters=new vt,p=st.tokenize=function(t,e){var i,n,r,o,a,s,c,h=F[t+" "];if(h)return e?0:h.slice(0);for(a=t,s=[],c=x.preFilter;a;){for(o in i&&!(n=q.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=$.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(U," ")}),a=a.slice(i.length)),x.filter)!(n=V[o].exec(a))||c[o]&&!(n=c[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?st.error(t):F(t,s).slice(0)},d=st.compile=function(t,e){var i,v,y,m,_,n,r=[],o=[],a=A[t+" "];if(!a){for(i=(e=e||p(t)).length;i--;)(a=Kt(e[i]))[C]?r.push(a):o.push(a);(a=A(t,(v=o,m=0<(y=r).length,_=0<v.length,n=function(t,e,i,n,r){var o,a,s,c=0,h="0",l=t&&[],u=[],d=K,f=t||_&&x.find.TAG("*",r),p=T+=null==d?1:Math.random()||.1,g=f.length;for(r&&(K=e==w||e||r);h!==g&&null!=(o=f[h]);h++){if(_&&o){for(a=0,e||o.ownerDocument==w||(b(o),i=!S);s=v[a++];)if(s(o,e||w,i)){n.push(o);break}r&&(T=p)}m&&((o=!s&&o)&&c--,t&&l.push(o))}if(c+=h,m&&h!==c){for(a=0;s=y[a++];)s(l,u,e,i);if(t){if(0<c)for(;h--;)l[h]||u[h]||(u[h]=M.call(n));u=xt(u)}E.apply(n,u),r&&!t&&0<u.length&&1<c+y.length&&st.uniqueSort(n)}return r&&(T=p,K=d),l},m?ht(n):n))).selector=t}return a},g=st.select=function(t,e,i,n){var r,o,a,s,c,h="function"==typeof t&&t,l=!n&&p(t=h.selector||t);if(i=i||[],1===l.length){if(2<(o=l[0]=l[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&S&&x.relative[o[1].type]){if(!(e=(x.find.ID(a.matches[0].replace(nt,u),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=V.needsContext.test(t)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((c=x.find[s])&&(n=c(a.matches[0].replace(nt,u),it.test(o[0].type)&&gt(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&yt(o)))return E.apply(i,n),i;break}}return(h||d(t,l))(n,e,!S,i,!e||it.test(t)&&gt(e.parentNode)||e),i},f.sortStable=C.split("").sort(P).join("")===C,f.detectDuplicates=!!h,b(),f.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(w.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ut(G,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),st}(w);C.find=f,C.expr=f.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=f.uniqueSort,C.text=f.getText,C.isXMLDoc=f.isXML,C.contains=f.contains,C.escapeSelector=f.escape;function p(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&C(t).is(i))break;n.push(t)}return n}function b(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}var T=C.expr.match.needsContext;function k(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(t,i,n){return _(i)?C.grep(t,function(t,e){return!!i.call(t,e,t)!==n}):i.nodeType?C.grep(t,function(t){return t===i!==n}):"string"!=typeof i?C.grep(t,function(t){return-1<r.call(i,t)!==n}):C.filter(i,t,n)}C.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?C.find.matchesSelector(n,t)?[n]:[]:C.find.matches(t,C.grep(e,function(t){return 1===t.nodeType}))},C.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(C(t).filter(function(){for(e=0;e<n;e++)if(C.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)C.find(t,r[e],i);return 1<n?C.uniqueSort(i):i},filter:function(t){return this.pushStack(A(this,t||[],!1))},not:function(t){return this.pushStack(A(this,t||[],!0))},is:function(t){return!!A(this,"string"==typeof t&&T.test(t)?C(t):t||[],!1).length}});var D,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||D,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==i.ready?i.ready(t):t(C):C.makeArray(t,this);if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:P.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:S,!0)),F.test(n[1])&&C.isPlainObject(e))for(n in e)_(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=S.getElementById(n[2]))&&(this[0]=r,this.length=1),this}).prototype=C.fn,D=C(S);var L=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e=C(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(C.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,o=[],a="string"!=typeof t&&C(t);if(!T.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&C.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?r.call(C(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(t,e,i){return p(t,"parentNode",i)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(t,e,i){return p(t,"nextSibling",i)},prevUntil:function(t,e,i){return p(t,"previousSibling",i)},siblings:function(t){return b((t.parentNode||{}).firstChild,t)},children:function(t){return b(t.firstChild)},contents:function(t){return null!=t.contentDocument&&n(t.contentDocument)?t.contentDocument:(k(t,"template")&&(t=t.content||t),C.merge([],t.childNodes))}},function(n,r){C.fn[n]=function(t,e){var i=C.map(this,r,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=C.filter(e,i)),1<this.length&&(M[n]||C.uniqueSort(i),L.test(n)&&i.reverse()),this.pushStack(i)}});var E=/[^\x20\t\r\n\f]+/g;function j(t){return t}function R(t){throw t}function G(t,e,i,n){var r;try{t&&_(r=t.promise)?r.call(t).done(e).fail(i):t&&_(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}C.Callbacks=function(n){var i;n="string"==typeof n?(i={},C.each(n.match(E)||[],function(t,e){i[e]=!0}),i):C.extend({},n);function r(){for(a=a||n.once,e=o=!0;c.length;h=-1)for(t=c.shift();++h<s.length;)!1===s[h].apply(t[0],t[1])&&n.stopOnFalse&&(h=s.length,t=!1);n.memory||(t=!1),o=!1,a&&(s=t?[]:"")}var o,t,e,a,s=[],c=[],h=-1,l={add:function(){return s&&(t&&!o&&(h=s.length-1,c.push(t)),function i(t){C.each(t,function(t,e){_(e)?n.unique&&l.has(e)||s.push(e):e&&e.length&&"string"!==K(e)&&i(e)})}(arguments),t&&!o&&r()),this},remove:function(){return C.each(arguments,function(t,e){for(var i;-1<(i=C.inArray(e,s,i));)s.splice(i,1),i<=h&&h--}),this},has:function(t){return t?-1<C.inArray(t,s):0<s.length},empty:function(){return s=s&&[],this},disable:function(){return a=c=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=c=[],t||o||(s=t=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),o||r()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!e}};return l},C.extend({Deferred:function(t){var o=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var r=arguments;return C.Deferred(function(n){C.each(o,function(t,e){var i=_(r[e[4]])&&r[e[4]];s[e[1]](function(){var t=i&&i.apply(this,arguments);t&&_(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[e[0]+"With"](this,i?[t]:arguments)})}),r=null}).promise()},then:function(e,i,n){var c=0;function h(r,o,a,s){return function(){function t(){var t,e;if(!(r<c)){if((t=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,_(e)?s?e.call(t,h(c,o,j,s),h(c,o,R,s)):(c++,e.call(t,h(c,o,j,s),h(c,o,R,s),h(c,o,j,o.notifyWith))):(a!==j&&(i=void 0,n=[t]),(s||o.resolveWith)(i,n))}}var i=this,n=arguments,e=s?t:function(){try{t()}catch(t){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(t,e.stackTrace),c<=r+1&&(a!==R&&(i=void 0,n=[t]),o.rejectWith(i,n))}};r?e():(C.Deferred.getStackHook&&(e.stackTrace=C.Deferred.getStackHook()),w.setTimeout(e))}}return C.Deferred(function(t){o[0][3].add(h(0,t,_(n)?n:j,t.notifyWith)),o[1][3].add(h(0,t,_(e)?e:j)),o[2][3].add(h(0,t,_(i)?i:R))}).promise()},promise:function(t){return null!=t?C.extend(t,a):a}},s={};return C.each(o,function(t,e){var i=e[2],n=e[5];a[e[1]]=i.add,n&&i.add(function(){r=n},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),i.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=i.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){function e(e){return function(t){r[e]=this,o[e]=1<arguments.length?s.call(arguments):t,--i||a.resolveWith(r,o)}}var i=arguments.length,n=i,r=Array(n),o=s.call(arguments),a=C.Deferred();if(i<=1&&(G(t,a.done(e(n)).resolve,a.reject,!i),"pending"===a.state()||_(o[n]&&o[n].then)))return a.then();for(;n--;)G(o[n],e(n),a.reject);return a.promise()}});var I=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,e){w.console&&w.console.warn&&t&&I.test(t.name)&&w.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},C.readyException=function(t){w.setTimeout(function(){throw t})};var O=C.Deferred();function H(){S.removeEventListener("DOMContentLoaded",H),w.removeEventListener("load",H),C.ready()}C.fn.ready=function(t){return O.then(t).catch(function(t){C.readyException(t)}),this},C.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0)!==t&&0<--C.readyWait||O.resolveWith(S,[C])}}),C.ready.then=O.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?w.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",H),w.addEventListener("load",H));var B=function(t,e,i,n,r,o,a){var s=0,c=t.length,h=null==i;if("object"===K(i))for(s in r=!0,i)B(t,e,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,_(n)||(a=!0),h&&(e=a?(e.call(t,n),null):(h=e,function(t,e,i){return h.call(C(t),i)})),e))for(;s<c;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return r?t:h?e.call(t):c?e(t[0],i):o},W=/^-ms-/,U=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function $(t){return t.replace(W,"ms-").replace(U,q)}function z(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function X(){this.expando=C.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[$(e)]=i;else for(n in e)r[$(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][$(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map($):(e=$(e))in n?[e]:e.match(E)||[]).length;for(;i--;)delete n[e[i]]}void 0!==e&&!C.isEmptyObject(n)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var Y=new X,V=new X,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Z(t,e,i){var n,r;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:Q.test(r)?JSON.parse(r):r)}catch(t){}V.set(t,e,i)}else i=void 0;return i}C.extend({hasData:function(t){return V.hasData(t)||Y.hasData(t)},data:function(t,e,i){return V.access(t,e,i)},removeData:function(t,e){V.remove(t,e)},_data:function(t,e,i){return Y.access(t,e,i)},_removeData:function(t,e){Y.remove(t,e)}}),C.fn.extend({data:function(i,t){var e,n,r,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){V.set(this,i)}):B(this,function(t){var e;return o&&void 0===t?void 0!==(e=V.get(o,i))||void 0!==(e=Z(o,i))?e:void 0:void this.each(function(){V.set(this,i,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=V.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(n=a[e].name).indexOf("data-")&&(n=$(n.slice(5)),Z(o,n,r[n]));Y.set(o,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){V.remove(this,t)})}}),C.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Y.get(t,e),i&&(!n||Array.isArray(i)?n=Y.access(t,e,C.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=C.queue(t,e),n=i.length,r=i.shift(),o=C._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,function(){C.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Y.get(t,i)||Y.access(t,i,{empty:C.Callbacks("once memory").add(function(){Y.remove(t,[e+"queue",i])})})}}),C.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?C.queue(this[0],e):void 0===i?this:this.each(function(){var t=C.queue(this,e,i);C._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&C.dequeue(this,e)})},dequeue:function(t){return this.each(function(){C.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function i(){--r||o.resolveWith(a,[a])}var n,r=1,o=C.Deferred(),a=this,s=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Y.get(a[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=S.documentElement,rt=function(t){return C.contains(t.ownerDocument,t)},ot={composed:!0};nt.getRootNode&&(rt=function(t){return C.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});function at(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===C.css(t,"display")}function st(t,e,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return C.css(t,e,"")},c=s(),h=i&&i[3]||(C.cssNumber[e]?"":"px"),l=t.nodeType&&(C.cssNumber[e]||"px"!==h&&+c)&&et.exec(C.css(t,e));if(l&&l[3]!==h){for(c/=2,h=h||l[3],l=+c||1;a--;)C.style(t,e,l+h),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),l/=o;l*=2,C.style(t,e,l+h),i=i||[]}return i&&(l=+l||+c||0,r=i[1]?l+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=l,n.end=r)),r}var ct={};function ht(t,e){for(var i,n,r,o,a,s,c=[],h=0,l=t.length;h<l;h++)(n=t[h]).style&&(i=n.style.display,e?("none"===i&&(c[h]=Y.get(n,"display")||null,c[h]||(n.style.display="")),""===n.style.display&&at(n)&&(c[h]=(s=o=r=void 0,o=n.ownerDocument,a=n.nodeName,(s=ct[a])||(r=o.body.appendChild(o.createElement(a)),s=C.css(r,"display"),r.parentNode.removeChild(r),"none"===s&&(s="block"),ct[a]=s)))):"none"!==i&&(c[h]="none",Y.set(n,"display",i)));for(h=0;h<l;h++)null!=c[h]&&(t[h].style.display=c[h]);return t}C.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?C(this).show():C(this).hide()})}});var lt,ut=/^(?:checkbox|radio)$/i,dt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,pt=S.createDocumentFragment().appendChild(S.createElement("div"));(lt=S.createElement("input")).setAttribute("type","radio"),lt.setAttribute("checked","checked"),lt.setAttribute("name","t"),pt.appendChild(lt),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",m.option=!!pt.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&k(t,e)?C.merge([t],i):i}function yt(t,e){for(var i=0,n=t.length;i<n;i++)Y.set(t[i],"globalEval",!e||Y.get(e[i],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,m.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var mt=/<|&#?\w+;/;function _t(t,e,i,n,r){for(var o,a,s,c,h,l,u=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===K(o))C.merge(d,o.nodeType?[o]:o);else if(mt.test(o)){for(a=a||u.appendChild(e.createElement("div")),s=(dt.exec(o)||["",""])[1].toLowerCase(),c=gt[s]||gt._default,a.innerHTML=c[1]+C.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;C.merge(d,a.childNodes),(a=u.firstChild).textContent=""}else d.push(e.createTextNode(o));for(u.textContent="",f=0;o=d[f++];)if(n&&-1<C.inArray(o,n))r&&r.push(o);else if(h=rt(o),a=vt(u.appendChild(o),"script"),h&&yt(a),i)for(l=0;o=a[l++];)ft.test(o.type||"")&&i.push(o);return u}var xt=/^key/,Kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function St(){return!1}function Ct(t,e){return t===function(){try{return S.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,i,n,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)Tt(t,s,i,n,e[s],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=St;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return C().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),t.each(function(){C.event.add(this,e,r,n,i)})}function kt(t,r,o){o?(Y.set(t,r,!1),C.event.add(t,r,{namespace:!1,handler:function(t){var e,i,n=Y.get(this,r);if(1&t.isTrigger&&this[r]){if(n.length)(C.event.special[r]||{}).delegateType&&t.stopPropagation();else if(n=s.call(arguments),Y.set(this,r,n),e=o(this,r),this[r](),n!==(i=Y.get(this,r))||e?Y.set(this,r,!1):i={},n!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else n.length&&(Y.set(this,r,{value:C.event.trigger(C.extend(n[0],C.Event.prototype),n.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Y.get(t,r)&&C.event.add(t,r,wt)}C.event={global:{},add:function(e,t,i,n,r){var o,a,s,c,h,l,u,d,f,p,g,v=Y.get(e);if(z(e))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&C.find.matchesSelector(nt,r),i.guid||(i.guid=C.guid++),(c=v.events)||(c=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),h=(t=(t||"").match(E)||[""]).length;h--;)f=g=(s=bt.exec(t[h])||[])[1],p=(s[2]||"").split(".").sort(),f&&(u=C.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=C.event.special[f]||{},l=C.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=c[f])||((d=c[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,p,a)||e.addEventListener&&e.addEventListener(f,a)),u.add&&(u.add.call(e,l),l.handler.guid||(l.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,l):d.push(l),C.event.global[f]=!0)},remove:function(t,e,i,n,r){var o,a,s,c,h,l,u,d,f,p,g,v=Y.hasData(t)&&Y.get(t);if(v&&(c=v.events)){for(h=(e=(e||"").match(E)||[""]).length;h--;)if(f=g=(s=bt.exec(e[h])||[])[1],p=(s[2]||"").split(".").sort(),f){for(u=C.event.special[f]||{},d=c[f=(n?u.delegateType:u.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)l=d[o],!r&&g!==l.origType||i&&i.guid!==l.guid||s&&!s.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,u.remove&&u.remove.call(t,l));a&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,p,v.handle)||C.removeEvent(t,f,v.handle),delete c[f])}else for(f in c)C.event.remove(t,f+e[h],i,n,!0);C.isEmptyObject(c)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,a,s=new Array(arguments.length),c=C.event.fix(t),h=(Y.get(this,"events")||Object.create(null))[c.type]||[],l=C.event.special[c.type]||{};for(s[0]=c,e=1;e<arguments.length;e++)s[e]=arguments[e];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(a=C.event.handlers.call(this,c,h),e=0;(r=a[e++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(n=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(c.result=n)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(t,e){var i,n,r,o,a,s=[],c=e.delegateCount,h=t.target;if(c&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},i=0;i<c;i++)void 0===a[r=(n=e[i]).selector+" "]&&(a[r]=n.needsContext?-1<C(r,this).index(h):C.find(r,this,null,[h]).length),a[r]&&o.push(n);o.length&&s.push({elem:h,handlers:o})}return h=this,c<e.length&&s.push({elem:h,handlers:e.slice(c)}),s},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[C.expando]?t:new C.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ut.test(e.type)&&e.click&&k(e,"input")&&kt(e,"click",wt),!1},trigger:function(t){var e=this||t;return ut.test(e.type)&&e.click&&k(e,"input")&&kt(e,"click"),!0},_default:function(t){var e=t.target;return ut.test(e.type)&&e.click&&k(e,"input")&&Y.get(e,"click")||k(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},C.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&xt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Kt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(t,e){C.event.special[t]={setup:function(){return kt(this,t,Ct),!1},trigger:function(){return kt(this,t),!0},delegateType:e}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){C.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||C.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=r),e}}}),C.fn.extend({on:function(t,e,i,n){return Tt(this,t,e,i,n)},one:function(t,e,i,n){return Tt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,C(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=St),this.each(function(){C.event.remove(this,t,i,e)});for(r in t)this.off(r,e,t[r]);return this}});var Ft=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return k(t,"table")&&k(11!==e.nodeType?e:e.firstChild,"tr")&&C(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Mt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Nt(t,e){var i,n,r,o,a,s;if(1===e.nodeType){if(Y.hasData(t)&&(s=Y.get(t).events))for(r in Y.remove(e,"handle events"),s)for(i=0,n=s[r].length;i<n;i++)C.event.add(e,r,s[r][i]);V.hasData(t)&&(o=V.access(t),a=C.extend({},o),V.set(e,a))}}function Et(i,n,r,o){n=v(n);var t,e,a,s,c,h,l=0,u=i.length,d=u-1,f=n[0],p=_(f);if(p||1<u&&"string"==typeof f&&!m.checkClone&&At.test(f))return i.each(function(t){var e=i.eq(t);p&&(n[0]=f.call(this,t,e.html())),Et(e,n,r,o)});if(u&&(e=(t=_t(n,i[0].ownerDocument,!1,i,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=C.map(vt(t,"script"),Lt)).length;l<u;l++)c=t,l!==d&&(c=C.clone(c,!0,!0),s&&C.merge(a,vt(c,"script"))),r.call(i[l],c,l);if(s)for(h=a[a.length-1].ownerDocument,C.map(a,Mt),l=0;l<s;l++)c=a[l],ft.test(c.type||"")&&!Y.access(c,"globalEval")&&C.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?C._evalUrl&&!c.noModule&&C._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},h):x(c.textContent.replace(Dt,""),c,h))}return i}function jt(t,e,i){for(var n,r=e?C.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||C.cleanData(vt(n)),n.parentNode&&(i&&rt(n)&&yt(vt(n,"script")),n.parentNode.removeChild(n));return t}C.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,o,a,s,c,h,l=t.cloneNode(!0),u=rt(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(a=vt(l),n=0,r=(o=vt(t)).length;n<r;n++)s=o[n],"input"===(h=(c=a[n]).nodeName.toLowerCase())&&ut.test(s.type)?c.checked=s.checked:"input"!==h&&"textarea"!==h||(c.defaultValue=s.defaultValue);if(e)if(i)for(o=o||vt(t),a=a||vt(l),n=0,r=o.length;n<r;n++)Nt(o[n],a[n]);else Nt(t,l);return 0<(a=vt(l,"script")).length&&yt(a,!u&&vt(t,"script")),l},cleanData:function(t){for(var e,i,n,r=C.event.special,o=0;void 0!==(i=t[o]);o++)if(z(i)){if(e=i[Y.expando]){if(e.events)for(n in e.events)r[n]?C.event.remove(i,n):C.removeEvent(i,n,e.handle);i[Y.expando]=void 0}i[V.expando]&&(i[V.expando]=void 0)}}}),C.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return B(this,function(t){return void 0===t?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Et(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)})},prepend:function(){return Et(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Pt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return Et(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Et(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return C.clone(this,t,e)})},html:function(t){return B(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ft.test(t)&&!gt[(dt.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(C.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=[];return Et(this,arguments,function(t){var e=this.parentNode;C.inArray(this,i)<0&&(C.cleanData(vt(this)),e&&e.replaceChild(t,this))},i)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){C.fn[t]=function(t){for(var e,i=[],n=C(t),r=n.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),C(n[o])[a](e),c.apply(i,e.get());return this.pushStack(i)}});function Rt(t,e,i){var n,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in n=i.call(t),e)t.style[r]=o[r];return n}var Gt,It,Ot,Ht,Bt,Wt,Ut,qt,$t=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=w),e.getComputedStyle(t)},Xt=new RegExp(it.join("|"),"i");function Yt(t,e,i){var n,r,o,a,s=t.style;return(i=i||zt(t))&&(""!==(a=i.getPropertyValue(e)||i[e])||rt(t)||(a=C.style(t,e)),!m.pixelBoxStyles()&&$t.test(a)&&Xt.test(e)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function Qt(){var t;qt&&(Ut.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",qt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(Ut).appendChild(qt),t=w.getComputedStyle(qt),Gt="1%"!==t.top,Wt=12===Jt(t.marginLeft),qt.style.right="60%",Ht=36===Jt(t.right),It=36===Jt(t.width),qt.style.position="absolute",Ot=12===Jt(qt.offsetWidth/3),nt.removeChild(Ut),qt=null)}function Jt(t){return Math.round(parseFloat(t))}Ut=S.createElement("div"),(qt=S.createElement("div")).style&&(qt.style.backgroundClip="content-box",qt.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===qt.style.backgroundClip,C.extend(m,{boxSizingReliable:function(){return Qt(),It},pixelBoxStyles:function(){return Qt(),Ht},pixelPosition:function(){return Qt(),Gt},reliableMarginLeft:function(){return Qt(),Wt},scrollboxSize:function(){return Qt(),Ot},reliableTrDimensions:function(){var t,e,i,n;return null==Bt&&(t=S.createElement("table"),e=S.createElement("tr"),i=S.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",i.style.height="9px",nt.appendChild(t).appendChild(e).appendChild(i),n=w.getComputedStyle(e),Bt=3<parseInt(n.height),nt.removeChild(t)),Bt}}));var Zt=["Webkit","Moz","ms"],te=S.createElement("div").style,ee={};function ie(t){return C.cssProps[t]||ee[t]||(t in te?t:ee[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Zt.length;i--;)if((t=Zt[i]+e)in te)return t}(t)||t)}var ne=/^(none|table(?!-c[ea]).+)/,re=/^--/,oe={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function se(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function ce(t,e,i,n,r,o){var a="width"===e?1:0,s=0,c=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(c+=C.css(t,i+it[a],!0,r)),n?("content"===i&&(c-=C.css(t,"padding"+it[a],!0,r)),"margin"!==i&&(c-=C.css(t,"border"+it[a]+"Width",!0,r))):(c+=C.css(t,"padding"+it[a],!0,r),"padding"!==i?c+=C.css(t,"border"+it[a]+"Width",!0,r):s+=C.css(t,"border"+it[a]+"Width",!0,r));return!n&&0<=o&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-s-.5))||0),c}function he(t,e,i){var n=zt(t),r=(!m.boxSizingReliable()||i)&&"border-box"===C.css(t,"boxSizing",!1,n),o=r,a=Yt(t,e,n),s="offset"+e[0].toUpperCase()+e.slice(1);if($t.test(a)){if(!i)return a;a="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&k(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===C.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===C.css(t,"boxSizing",!1,n),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ce(t,e,i||(r?"border":"content"),o,n,a)+"px"}function le(t,e,i,n,r){return new le.prototype.init(t,e,i,n,r)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Yt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=$(e),c=re.test(e),h=t.style;if(c||(e=ie(s)),a=C.cssHooks[e]||C.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:h[e];"string"==(o=typeof i)&&(r=et.exec(i))&&r[1]&&(i=st(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||c||(i+=r&&r[3]||(C.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(c?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var r,o,a,s=$(e);return re.test(e)||(e=ie(s)),(a=C.cssHooks[e]||C.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,i)),void 0===r&&(r=Yt(t,e,n)),"normal"===r&&e in ae&&(r=ae[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),C.each(["height","width"],function(t,c){C.cssHooks[c]={get:function(t,e,i){if(e)return!ne.test(C.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?he(t,c,i):Rt(t,oe,function(){return he(t,c,i)})},set:function(t,e,i){var n,r=zt(t),o=!m.scrollboxSize()&&"absolute"===r.position,a=(o||i)&&"border-box"===C.css(t,"boxSizing",!1,r),s=i?ce(t,c,i,a,r):0;return a&&o&&(s-=Math.ceil(t["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(r[c])-ce(t,c,"border",!1,r)-.5)),s&&(n=et.exec(e))&&"px"!==(n[3]||"px")&&(t.style[c]=e,e=C.css(t,c)),se(0,e,s)}}}),C.cssHooks.marginLeft=Vt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Yt(t,"marginLeft"))||t.getBoundingClientRect().left-Rt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(r,o){C.cssHooks[r+o]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[r+it[e]+o]=n[e]||n[e-2]||n[0];return i}},"margin"!==r&&(C.cssHooks[r+o].set=se)}),C.fn.extend({css:function(t,e){return B(this,function(t,e,i){var n,r,o={},a=0;if(Array.isArray(e)){for(n=zt(t),r=e.length;a<r;a++)o[e[a]]=C.css(t,e[a],!1,n);return o}return void 0!==i?C.style(t,e,i):C.css(t,e)},t,e,1<arguments.length)}}),((C.Tween=le).prototype={constructor:le,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var t=le.propHooks[this.prop];return t&&t.get?t.get(this):le.propHooks._default.get(this)},run:function(t){var e,i=le.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):le.propHooks._default.set(this),this}}).init.prototype=le.prototype,(le.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1!==t.elem.nodeType||!C.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:C.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=le.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},C.fx=le.prototype.init,C.fx.step={};var ue,de,fe,pe,ge=/^(?:toggle|show|hide)$/,ve=/queueHooks$/;function ye(){de&&(!1===S.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(ye):w.setTimeout(ye,C.fx.interval),C.fx.tick())}function me(){return w.setTimeout(function(){ue=void 0}),ue=Date.now()}function _e(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=it[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function xe(t,e,i){for(var n,r=(Ke.tweeners[e]||[]).concat(Ke.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,e,t))return n}function Ke(o,t,e){var i,a,n=0,r=Ke.prefilters.length,s=C.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=ue||me(),e=Math.max(0,h.startTime+h.duration-t),i=1-(e/h.duration||0),n=0,r=h.tweens.length;n<r;n++)h.tweens[n].run(i);return s.notifyWith(o,[h,i,e]),i<1&&r?e:(r||s.notifyWith(o,[h,1,0]),s.resolveWith(o,[h]),!1)},h=s.promise({elem:o,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},e),originalProperties:t,originalOptions:e,startTime:ue||me(),duration:e.duration,tweens:[],createTween:function(t,e){var i=C.Tween(o,h.opts,t,e,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(i),i},stop:function(t){var e=0,i=t?h.tweens.length:0;if(a)return this;for(a=!0;e<i;e++)h.tweens[e].run(1);return t?(s.notifyWith(o,[h,1,0]),s.resolveWith(o,[h,t])):s.rejectWith(o,[h,t]),this}}),l=h.props;for(function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=$(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=C.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(l,h.opts.specialEasing);n<r;n++)if(i=Ke.prefilters[n].call(h,o,l,h.opts))return _(i.stop)&&(C._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return C.map(l,xe,h),_(h.opts.start)&&h.opts.start.call(o,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),C.fx.timer(C.extend(c,{elem:o,anim:h,queue:h.opts.queue})),h}C.Animation=C.extend(Ke,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return st(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){for(var i,n=0,r=(t=_(t)?(e=t,["*"]):t.match(E)).length;n<r;n++)i=t[n],Ke.tweeners[i]=Ke.tweeners[i]||[],Ke.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,a,s,c,h,l,u="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&at(t),v=Y.get(t,"fxshow");for(n in i.queue||(null==(a=C._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,C.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[n],ge.test(r)){if(delete e[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!v||void 0===v[n])continue;g=!0}f[n]=v&&v[n]||C.style(t,n)}if((c=!C.isEmptyObject(e))||!C.isEmptyObject(f))for(n in u&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=v&&v.display)&&(h=Y.get(t,"display")),"none"===(l=C.css(t,"display"))&&(h?l=h:(ht([t],!0),h=t.style.display||h,l=C.css(t,"display"),ht([t]))),("inline"===l||"inline-block"===l&&null!=h)&&"none"===C.css(t,"float")&&(c||(d.done(function(){p.display=h}),null==h&&(l=p.display,h="none"===l?"":l)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),c=!1,f)c||(v?"hidden"in v&&(g=v.hidden):v=Y.access(t,"fxshow",{display:h}),o&&(v.hidden=!g),g&&ht([t],!0),d.done(function(){for(n in g||ht([t]),Y.remove(t,"fxshow"),f)C.style(t,n,f[n])})),c=xe(g?v[n]:0,n,d),n in v||(v[n]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?Ke.prefilters.unshift(t):Ke.prefilters.push(t)}}),C.speed=function(t,e,i){var n=t&&"object"==typeof t?C.extend({},t):{complete:i||!i&&e||_(t)&&t,duration:t,easing:i&&e||e&&!_(e)&&e};return C.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){_(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(t,e,i,n){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){function r(){var t=Ke(this,C.extend({},e),a);(o||Y.get(this,"finish"))&&t.stop(!0)}var o=C.isEmptyObject(e),a=C.speed(t,i,n);return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(r,t,o){function a(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",i=C.timers,n=Y.get(this);if(e)n[e]&&n[e].stop&&a(n[e]);else for(e in n)n[e]&&n[e].stop&&ve.test(e)&&a(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=r&&i[e].queue!==r||(i[e].anim.stop(o),t=!1,i.splice(e,1));!t&&o||C.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=Y.get(this),i=e[a+"queue"],n=e[a+"queueHooks"],r=C.timers,o=i?i.length:0;for(e.finish=!0,C.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),C.each(["toggle","show","hide"],function(t,n){var r=C.fn[n];C.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(_e(n,!0),t,e,i)}}),C.each({slideDown:_e("show"),slideUp:_e("hide"),slideToggle:_e("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){C.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),C.timers=[],C.fx.tick=function(){var t,e=0,i=C.timers;for(ue=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||C.fx.stop(),ue=void 0},C.fx.timer=function(t){C.timers.push(t),C.fx.start()},C.fx.interval=13,C.fx.start=function(){de||(de=!0,ye())},C.fx.stop=function(){de=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(n,t){return n=C.fx&&C.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=w.setTimeout(t,n);e.stop=function(){w.clearTimeout(i)}})},fe=S.createElement("input"),pe=S.createElement("select").appendChild(S.createElement("option")),fe.type="checkbox",m.checkOn=""!==fe.value,m.optSelected=pe.selected,(fe=S.createElement("input")).value="t",fe.type="radio",m.radioValue="t"===fe.value;var be,we=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return B(this,C.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){C.removeAttr(this,t)})}}),C.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?C.prop(t,e,i):(1===o&&C.isXMLDoc(t)||(r=C.attrHooks[e.toLowerCase()]||(C.expr.match.bool.test(e)?be:void 0)),void 0!==i?null===i?void C.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):!(r&&"get"in r&&null!==(n=r.get(t,e)))&&null==(n=C.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&k(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(E);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),be={set:function(t,e,i){return!1===e?C.removeAttr(t,i):t.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(t,e){var a=we[e]||C.find.attr;we[e]=function(t,e,i){var n,r,o=e.toLowerCase();return i||(r=we[o],we[o]=n,n=null!=a(t,e,i)?o:null,we[o]=r),n}});var Se=/^(?:input|select|textarea|button)$/i,Ce=/^(?:a|area)$/i;function Te(t){return(t.match(E)||[]).join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Fe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(E)||[]}C.fn.extend({prop:function(t,e){return B(this,C.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[C.propFix[t]||t]})}}),C.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(t)||(e=C.propFix[e]||e,r=C.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):Se.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(e){var t,i,n,r,o,a,s,c=0;if(_(e))return this.each(function(t){C(this).addClass(e.call(this,t,ke(this)))});if((t=Fe(e)).length)for(;i=this[c++];)if(r=ke(i),n=1===i.nodeType&&" "+Te(r)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=Te(n))&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,r,o,a,s,c=0;if(_(e))return this.each(function(t){C(this).removeClass(e.call(this,t,ke(this)))});if(!arguments.length)return this.attr("class","");if((t=Fe(e)).length)for(;i=this[c++];)if(r=ke(i),n=1===i.nodeType&&" "+Te(r)+" "){for(a=0;o=t[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=Te(n))&&i.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r,a="string"==o||Array.isArray(r);return"boolean"==typeof e&&a?e?this.addClass(r):this.removeClass(r):_(r)?this.each(function(t){C(this).toggleClass(r.call(this,t,ke(this),e),e)}):this.each(function(){var t,e,i,n;if(a)for(e=0,i=C(this),n=Fe(r);t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==r&&"boolean"!=o||((t=ke(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==r&&Y.get(this,"__className__")||""))})},hasClass:function(t){for(var e,i=0,n=" "+t+" ";e=this[i++];)if(1===e.nodeType&&-1<(" "+Te(ke(e))+" ").indexOf(n))return!0;return!1}});var Ae=/\r/g;C.fn.extend({val:function(i){var n,t,r,e=this[0];return arguments.length?(r=_(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?i.call(this,t,C(this).val()):i)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=C.map(e,function(t){return null==t?"":t+""})),(n=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=C.valHooks[e.type]||C.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Ae,""):null==t?"":t:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:Te(C.text(t))}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type,a=o?null:[],s=o?r+1:n.length,c=r<0?s:o?r:0;c<s;c++)if(((i=n[c]).selected||c===r)&&!i.disabled&&(!i.parentNode.disabled||!k(i.parentNode,"optgroup"))){if(e=C(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=C.makeArray(e),a=r.length;a--;)((n=r[a]).selected=-1<C.inArray(C.valHooks.option.get(n),o))&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<C.inArray(C(t).val(),e)}},m.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in w;function De(t){t.stopPropagation()}var Pe=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(t,e,i,n){var r,o,a,s,c,h,l,u=[i||S],d=y.call(t,"type")?t.type:t,f=y.call(t,"namespace")?t.namespace.split("."):[],p=l=o=i=i||S;if(3!==i.nodeType&&8!==i.nodeType&&!Pe.test(d+C.event.triggered)&&(-1<d.indexOf(".")&&(d=(f=d.split(".")).shift(),f.sort()),s=d.indexOf(":")<0&&"on"+d,(t=t[C.expando]?t:new C.Event(d,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:C.makeArray(e,[t]),h=C.event.special[d]||{},n||!h.trigger||!1!==h.trigger.apply(i,e))){if(!n&&!h.noBubble&&!g(i)){for(a=h.delegateType||d,Pe.test(a+d)||(p=p.parentNode);p;p=p.parentNode)u.push(p),o=p;o===(i.ownerDocument||S)&&u.push(o.defaultView||o.parentWindow||w)}for(r=0;(p=u[r++])&&!t.isPropagationStopped();)l=p,t.type=1<r?a:h.bindType||d,(c=(Y.get(p,"events")||Object.create(null))[t.type]&&Y.get(p,"handle"))&&c.apply(p,e),(c=s&&p[s])&&c.apply&&z(p)&&(t.result=c.apply(p,e),!1===t.result&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),e)||!z(i)||s&&_(i[d])&&!g(i)&&((o=i[s])&&(i[s]=null),C.event.triggered=d,t.isPropagationStopped()&&l.addEventListener(d,De),i[d](),t.isPropagationStopped()&&l.removeEventListener(d,De),C.event.triggered=void 0,o&&(i[s]=o)),t.result}},simulate:function(t,e,i){var n=C.extend(new C.Event,i,{type:t,isSimulated:!0});C.event.trigger(n,null,e)}}),C.fn.extend({trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return C.event.trigger(t,e,i,!0)}}),m.focusin||C.each({focus:"focusin",blur:"focusout"},function(i,n){function r(t){C.event.simulate(n,t.target,C.event.fix(t))}C.event.special[n]={setup:function(){var t=this.ownerDocument||this.document||this,e=Y.access(t,n);e||t.addEventListener(i,r,!0),Y.access(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=Y.access(t,n)-1;e?Y.access(t,n,e):(t.removeEventListener(i,r,!0),Y.remove(t,n))}}});var Le=w.location,Me={guid:Date.now()},Ne=/\?/;C.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new w.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+t),e};var Ee=/\[\]$/,je=/\r?\n/g,Re=/^(?:submit|button|image|reset|file)$/i,Ge=/^(?:input|select|textarea|keygen)/i;C.param=function(t,e){function i(t,e){var i=_(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)}var n,r=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){i(this.name,this.value)});else for(n in t)!function i(n,t,r,o){var e;if(Array.isArray(t))C.each(t,function(t,e){r||Ee.test(n)?o(n,e):i(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,o)});else if(r||"object"!==K(t))o(n,t);else for(e in t)i(n+"["+e+"]",t[e],r,o)}(n,t[n],e,i);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&Ge.test(this.nodeName)&&!Re.test(t)&&(this.checked||!ut.test(t))}).map(function(t,e){var i=C(this).val();return null==i?null:Array.isArray(i)?C.map(i,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:i.replace(je,"\r\n")}}).get()}});var Ie=/%20/g,Oe=/#.*$/,He=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)$/gm,We=/^(?:GET|HEAD)$/,Ue=/^\/\//,qe={},$e={},ze="*/".concat("*"),Xe=S.createElement("a");function Ye(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,r=t.toLowerCase().match(E)||[];if(_(e))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(e)):(o[i]=o[i]||[]).push(e)}}function Ve(e,r,o,a){var s={},c=e===$e;function h(t){var n;return s[t]=!0,C.each(e[t]||[],function(t,e){var i=e(r,o,a);return"string"!=typeof i||c||s[i]?c?!(n=i):void 0:(r.dataTypes.unshift(i),h(i),!1)}),n}return h(r.dataTypes[0])||!s["*"]&&h("*")}function Qe(t,e){var i,n,r=C.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n=n||{})[i]=e[i]);return n&&C.extend(!0,t,n),t}Xe.href=Le.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Le.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Le.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Qe(Qe(t,C.ajaxSettings),e):Qe(C.ajaxSettings,t)},ajaxPrefilter:Ye(qe),ajaxTransport:Ye($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var l,u,d,i,f,n,p,g,r,o,v=C.ajaxSetup({},e),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?C(y):C.event,_=C.Deferred(),x=C.Callbacks("once memory"),K=v.statusCode||{},a={},s={},c="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(p){if(!i)for(i={};e=Be.exec(d);)i[e[1].toLowerCase()+" "]=(i[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=i[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(t,e){return null==p&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,a[t]=e),this},overrideMimeType:function(t){return null==p&&(v.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)b.always(t[b.status]);else for(e in t)K[e]=[K[e],t[e]];return this},abort:function(t){var e=t||c;return l&&l.abort(e),h(0,e),this}};if(_.promise(b),v.url=((t||v.url||Le.href)+"").replace(Ue,Le.protocol+"//"),v.type=e.method||e.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(E)||[""],null==v.crossDomain){n=S.createElement("a");try{n.href=v.url,n.href=n.href,v.crossDomain=Xe.protocol+"//"+Xe.host!=n.protocol+"//"+n.host}catch(t){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=C.param(v.data,v.traditional)),Ve(qe,v,e,b),p)return b;for(r in(g=C.event&&v.global)&&0==C.active++&&C.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!We.test(v.type),u=v.url.replace(Oe,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Ie,"+")):(o=v.url.slice(u.length),v.data&&(v.processData||"string"==typeof v.data)&&(u+=(Ne.test(u)?"&":"?")+v.data,delete v.data),!1===v.cache&&(u=u.replace(He,"$1"),o=(Ne.test(u)?"&":"?")+"_="+Me.guid+++o),v.url=u+o),v.ifModified&&(C.lastModified[u]&&b.setRequestHeader("If-Modified-Since",C.lastModified[u]),C.etag[u]&&b.setRequestHeader("If-None-Match",C.etag[u])),(v.data&&v.hasContent&&!1!==v.contentType||e.contentType)&&b.setRequestHeader("Content-Type",v.contentType),b.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+ze+"; q=0.01":""):v.accepts["*"]),v.headers)b.setRequestHeader(r,v.headers[r]);if(v.beforeSend&&(!1===v.beforeSend.call(y,b,v)||p))return b.abort();if(c="abort",x.add(v.complete),b.done(v.success),b.fail(v.error),l=Ve($e,v,e,b)){if(b.readyState=1,g&&m.trigger("ajaxSend",[b,v]),p)return b;v.async&&0<v.timeout&&(f=w.setTimeout(function(){b.abort("timeout")},v.timeout));try{p=!1,l.send(a,h)}catch(t){if(p)throw t;h(-1,t)}}else h(-1,"No Transport");function h(t,e,i,n){var r,o,a,s,c,h=e;p||(p=!0,f&&w.clearTimeout(f),l=void 0,d=n||"",b.readyState=0<t?4:0,r=200<=t&&t<300||304===t,i&&(s=function(t,e,i){for(var n,r,o,a,s=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){c.unshift(r);break}if(c[0]in i)o=c[0];else{for(r in i){if(!c[0]||t.converters[r+" "+c[0]]){o=r;break}a=a||r}o=o||a}if(o)return o!==c[0]&&c.unshift(o),i[o]}(v,b,i)),!r&&-1<C.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(t,e,i,n){var r,o,a,s,c,h={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!c&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=h[c+" "+o]||h["* "+o]))for(r in h)if((s=r.split(" "))[1]===o&&(a=h[c+" "+s[0]]||h["* "+s[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}(v,s,b,r),r?(v.ifModified&&((c=b.getResponseHeader("Last-Modified"))&&(C.lastModified[u]=c),(c=b.getResponseHeader("etag"))&&(C.etag[u]=c)),204===t||"HEAD"===v.type?h="nocontent":304===t?h="notmodified":(h=s.state,o=s.data,r=!(a=s.error))):(a=h,!t&&h||(h="error",t<0&&(t=0))),b.status=t,b.statusText=(e||h)+"",r?_.resolveWith(y,[o,h,b]):_.rejectWith(y,[b,h,a]),b.statusCode(K),K=void 0,g&&m.trigger(r?"ajaxSuccess":"ajaxError",[b,v,r?o:a]),x.fireWith(y,[b,h]),g&&(m.trigger("ajaxComplete",[b,v]),--C.active||C.event.trigger("ajaxStop")))}return b},getJSON:function(t,e,i){return C.get(t,e,i,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,r){C[r]=function(t,e,i,n){return _(e)&&(n=n||i,i=e,e=void 0),C.ajax(C.extend({url:t,type:r,dataType:n,data:e,success:i},C.isPlainObject(t)&&t))}}),C.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),C._evalUrl=function(t,e,i){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){C.globalEval(t,e,i)}})},C.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return _(i)?this.each(function(t){C(this).wrapInner(i.call(this,t))}):this.each(function(){var t=C(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=_(e);return this.each(function(t){C(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(t){return!C.expr.pseudos.visible(t)},C.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Ze=C.ajaxSettings.xhr();m.cors=!!Ze&&"withCredentials"in Ze,m.ajax=Ze=!!Ze,C.ajaxTransport(function(r){var o,a;if(m.cors||Ze&&!r.crossDomain)return{send:function(t,e){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)n.setRequestHeader(i,t[i]);o=function(t){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===t?n.abort():"error"===t?"number"!=typeof n.status?e(0,"error"):e(n.status,n.statusText):e(Je[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=n.ontimeout=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),C.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),C.ajaxTransport("script",function(i){var n,r;if(i.crossDomain||i.scriptAttrs)return{send:function(t,e){n=C("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(t){n.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var ti,ei=[],ii=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||C.expando+"_"+Me.guid++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,o,a=!1!==t.jsonp&&(ii.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ii,"$1"+n):!1!==t.jsonp&&(t.url+=(Ne.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||C.error(n+" was not called"),o[0]},t.dataTypes[0]="json",r=w[n],w[n]=function(){o=arguments},i.always(function(){void 0===r?C(w).removeProp(n):w[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,ei.push(n)),o&&_(r)&&r(o[0]),o=r=void 0}),"script"}),m.createHTMLDocument=((ti=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ti.childNodes.length),C.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(m.createHTMLDocument?((n=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(n)):e=S),o=!i&&[],(r=F.exec(t))?[e.createElement(r[1])]:(r=_t([t],e,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var n,r,o},C.fn.load=function(t,e,i){var n,r,o,a=this,s=t.indexOf(" ");return-1<s&&(n=Te(t.slice(s)),t=t.slice(0,s)),_(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&C.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(n?C("<div>").append(C.parseHTML(t)).find(n):t)}).always(i&&function(t,e){a.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length},C.offset={setOffset:function(t,e,i){var n,r,o,a,s,c,h=C.css(t,"position"),l=C(t),u={};"static"===h&&(t.style.position="relative"),s=l.offset(),o=C.css(t,"top"),c=C.css(t,"left"),r=("absolute"===h||"fixed"===h)&&-1<(o+c).indexOf("auto")?(a=(n=l.position()).top,n.left):(a=parseFloat(o)||0,parseFloat(c)||0),_(e)&&(e=e.call(t,i,C.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+r),"using"in e?e.using.call(t,u):("number"==typeof u.top&&(u.top+="px"),"number"==typeof u.left&&(u.left+="px"),l.css(u))}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){C.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===C.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===C.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=C(t).offset()).top+=C.css(t,"borderTopWidth",!0),r.left+=C.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-C.css(n,"marginTop",!0),left:e.left-r.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===C.css(t,"position");)t=t.offsetParent;return t||nt})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;C.fn[e]=function(t){return B(this,function(t,e,i){var n;return g(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===i?n?n[r]:t[e]:void(n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):t[e]=i)},e,t,arguments.length)}}),C.each(["top","left"],function(t,i){C.cssHooks[i]=Vt(m.pixelPosition,function(t,e){if(e)return e=Yt(t,i),$t.test(e)?C(t).position()[i]+"px":e})}),C.each({Height:"height",Width:"width"},function(a,s){C.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){C.fn[o]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),r=n||(!0===t||!0===e?"margin":"border");return B(this,function(t,e,i){var n;return g(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+a],n["scroll"+a],t.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?C.css(t,e,r):C.style(t,e,i,r)},s,i?t:void 0,i)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}}),C.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,i){C.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}});var ni=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),_(t))return n=s.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(s.call(arguments)))}).guid=t.guid=t.guid||C.guid++,r},C.holdReady=function(t){t?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=k,C.isFunction=_,C.isWindow=g,C.camelCase=$,C.type=K,C.now=Date.now,C.isNumeric=function(t){var e=C.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},C.trim=function(t){return null==t?"":(t+"").replace(ni,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var ri=w.jQuery,oi=w.$;return C.noConflict=function(t){return w.$===C&&(w.$=oi),t&&w.jQuery===C&&(w.jQuery=ri),C},void 0===t&&(w.jQuery=w.$=C),C});var EnjoyHint=function(t){var o,a=this,s=$.extend({onStart:function(){},onEnd:function(){},onSkip:function(){},onNext:function(){},container:"body",animation_time:800,show_close:!1,scroll_option:"scroll_into_view_bottom",debug_step:!1},t),i=[],c=0,r=!1;$body=$(s.container);function e(t){t.preventDefault()}function h(){s.onEnd(),$body.enjoyhint("clear"),$body.enjoyhint("hide"),$body.css({overflow:"auto"}),$(document).off("touchmove",e)}a.clear=function(){var t=$(".enjoyhint_next_btn"),e=$(".enjoyhint_skip_btn");t.removeClass(a.nextUserClass),t.text("Next"),e.removeClass(a.skipUserClass),e.text("Skip")};var u=function(){var t,l,e,n;i&&i[c]?(s.onNext(),(t=$(".enjoyhint")).removeClass("enjoyhint-step-"+c),t.removeClass("enjoyhint-step-"+(c+1)),t.addClass("enjoyhint-step-"+(c+1)),(l=i[c]).onBeforeStart&&"function"==typeof l.onBeforeStart&&l.onBeforeStart(),s.debug_step&&(console.log(c+" "+r),console.log(l)),e=l.timeout||0,n=l.scrollOption||s.scroll_option,setTimeout(function(){if(r)return r=!1,void d();if(!l.selector)for(var t in l){var e;l.hasOwnProperty(t)&&t.split(" ")[1]&&(l.selector=t.split(" ")[1],"next"===(e=t.split(" ")[0])||"auto"===e||"custom"===e?l.event_type=e:l.event=e,l.description=l[t])}switch(setTimeout(function(){a.clear()},250),n){case"scroll_to":$body.scrollTo(l.selector,l.scrollAnimationSpeed||250,{offset:-100});break;case"scroll_into_view_top":0<(i=$(l.selector)).length&&i.get(0).scrollIntoView(!0);break;case"scroll_into_view_bottom":var i;0<(i=$(l.selector)).length&&i.get(0).scrollIntoView(!1)}setTimeout(function(){var t,e,h=$(l.selector),i=f(l.event);if($body.enjoyhint("show"),$body.enjoyhint("hide_next"),0==s.show_close&&$body.enjoyhint("hide_close"),o=h,l.event_selector&&(o=$(l.event_selector)),l.event_type||"key"!=l.event||h.keydown(function(t){t.which==l.keyCode&&(c++,u())}),1==l.showNext&&$body.enjoyhint("show_next"),0==l.showSkip?$body.enjoyhint("hide_skip"):$body.enjoyhint("show_skip"),1==l.showClose&&$body.enjoyhint("show_close"),l.nextButton&&((t=$(".enjoyhint_next_btn")).addClass(l.nextButton.className||""),t.text(l.nextButton.text||"Next"),a.nextUserClass=l.nextButton.className),l.skipButton&&((e=$(".enjoyhint_skip_btn")).addClass(l.skipButton.className||""),e.text(l.skipButton.text||"Skip"),a.skipUserClass=l.skipButton.className),l.event_type)switch(l.event_type){case"auto":return h[l.event](),l.event,c++,void u();case"custom":p(l.event,function(){c++,g(l.event),u()});break;case"next":$body.enjoyhint("show_next");break;case"no-skip":$body.enjoyhint("hide_skip")}else o.on(i,function(t){l.keyCode&&t.keyCode!=l.keyCode||(c++,$(this).off(i),u())});function n(){if(!((h=$(l.selector)).length<1)){var t=h.get(0).getBoundingClientRect(),e=t.width,i=t.height,n=Math.max(e,i),r=l.radius||Math.round(n/2)+5,o=h.offset(),a=void 0!==l.margin?l.margin:10,s={x:o.left+Math.round(e/2),y:o.top+Math.round(i/2)-$(document).scrollTop()},c={enjoyHintElementSelector:l.selector,center_x:s.x,center_y:s.y,label_offset_x:l.label_offset_x||0,label_offset_y:l.label_offset_y||0,text:l.description,top:l.top,bottom:l.bottom,left:l.left,right:l.right,margin:l.margin,scroll:l.scroll,hidden:l.hidden||!1};return l.shape&&"circle"==l.shape?(c.shape="circle",c.radius=r):(c.radius=0,c.width=e+a,c.height=i+a),c}}var r=n();$body.enjoyhint("render_label_with_shape",r,a.stop,n),"next"==l.event&&$body.enjoyhint("disable_element_events")},l.scrollAnimationSpeed+20||270)},e)):h()},d=function(){c++,u()},n=function(){l(),h()},l=function(){var t=i[c],e=$(t.selector);g(t.event),e.off(f(t.event)),e.off(f(t.event),!0)},f=function(t,e){return t+(e?"custom":"")+".enjoy_hint"},p=function(t,e){$body.on(f(t,!0),e)},g=function(t){$body.off(f(t,!0))};$(window).on("resize.enjoy_hint_permanent",function(){o[0]&&$body.enjoyhint("redo_events_near_rect",o[0].getBoundingClientRect())}),a.stop=function(){n()},a.reRunScript=function(t){l(),c=t,u()},a.runScript=function(){$body.css({overflow:"hidden"}),$(document).on("touchmove",e),c=0,s.onStart(),u()},a.resumeScript=function(){u()},a.setCurrentStep=function(t){c=t},a.getCurrentStep=function(){return c},a.trigger=function(t){switch(t){case"next":d();break;case"skip":n();break;case"ignore_step":r=!0;break;default:$body.trigger(f(t,!0))}},a.setScript=function(t){t&&(i=t)},a.previousStep=function(){for(c--;0<c&&("auto"===i[c].event_type||!1===$(i[c].selector).is(":visible"));)c--;c<=0&&(c=0),a.reRunScript(c)},a.set=function(t){a.setScript(t)},a.setSteps=function(t){a.setScript(t)},a.run=function(){a.runScript()},a.resume=function(){a.resumeScript()},$(".enjoyhint")&&$(".enjoyhint").remove(),$body.enjoyhint({onNextClick:function(){d()},onSkipClick:function(){s.onSkip(),n()},animation_time:s.animation_time})};CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){return i<2*r&&(r=i/2),n<2*r&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+i,e,t+i,e+n,r),this.arcTo(t+i,e+n,t,e+n,r),this.arcTo(t,e+n,t,e,r),this.arcTo(t,e,t+i,e,r),this.closePath(),this},function(O){window.innerWidth,window.innerHeight;var H,e={init:function(h){return this.each(function(){this.enjoyhint_obj={},(H=this.enjoyhint_obj).resetComponentStuff=function(){window.innerWidth,window.innerHeight};var t=O(this);function l(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)i.setAttribute(n,e[n]);return i}H.options=jQuery.extend({onNextClick:function(){},onSkipClick:function(){},animation_time:800},h),H.gcl={chooser:"enjoyhint"},H.cl={enjoy_hint:"enjoyhint",hide:"enjoyhint_hide",disable_events_element:"enjoyhint_disable_events",btn:"enjoyhint_btn",skip_btn:"enjoyhint_skip_btn",close_btn:"enjoyhint_close_btn",next_btn:"enjoyhint_next_btn",main_canvas:"enjoyhint_canvas",main_svg:"enjoyhint_svg",svg_wrapper:"enjoyhint_svg_wrapper",svg_transparent:"enjoyhint_svg_transparent",kinetic_container:"kinetic_container"},H.canvas_size={w:1.4*O(window).width(),h:1.4*O(window).height()};H.enjoyhint=O("<div>",{class:H.cl.enjoy_hint+" "+H.cl.svg_transparent}).appendTo(t),H.enjoyhint_svg_wrapper=O("<div>",{class:H.cl.svg_wrapper+" "+H.cl.svg_transparent}).appendTo(H.enjoyhint),H.$stage_container=O('<div id="'+H.cl.kinetic_container+'">').appendTo(H.enjoyhint),H.$canvas=O('<canvas id="enj_canvas" width="'+H.canvas_size.w+'" height="'+H.canvas_size.h+'" class="'+H.cl.main_canvas+'">').appendTo(H.enjoyhint),H.$svg=O('<svg width="'+H.canvas_size.w+'" height="'+H.canvas_size.h+'" class="'+H.cl.main_canvas+" "+H.cl.main_svg+'">').appendTo(H.enjoyhint_svg_wrapper);var e=O(l("defs")),i=O(l("marker",{id:"arrowMarker",viewBox:"0 0 36 21",refX:"21",refY:"10",markerUnits:"strokeWidth",orient:"auto",markerWidth:"16",markerHeight:"12"})),n=O(l("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:2",d:"M0,0 c30,11 30,9 0,20"}));e.append(i.append(n)).appendTo(H.$svg),H.kinetic_stage=new Kinetic.Stage({container:H.cl.kinetic_container,width:H.canvas_size.w,height:H.canvas_size.h,scaleX:1}),H.layer=new Kinetic.Layer,H.rect=new Kinetic.Rect({fill:"rgba(0,0,0,0.6)",width:H.canvas_size.w,height:H.canvas_size.h});var r=O("<div>",{class:H.cl.disable_events_element}).appendTo(H.enjoyhint),o=r.clone().appendTo(H.enjoyhint),a=r.clone().appendTo(H.enjoyhint),s=r.clone().appendTo(H.enjoyhint);H.$element_dis_events=r.clone().appendTo(H.enjoyhint);function c(t){t.stopImmediatePropagation()}O("button").focusout(c),r.click(c),o.click(c),a.click(c),s.click(c),H.$element_dis_events.click(c),H.$skip_btn=O("<div>",{class:H.cl.skip_btn}).appendTo(H.enjoyhint).html("Skip").click(function(t){H.hide(),H.options.onSkipClick()}),H.$next_btn=O("<div>",{class:H.cl.next_btn}).appendTo(H.enjoyhint).html("Next").click(function(t){H.options.onNextClick()}),H.$close_btn=O("<div>",{class:H.cl.close_btn}).appendTo(H.enjoyhint).html("").click(function(t){H.hide(),H.options.onSkipClick()}),H.$canvas.mousedown(function(t){O("canvas").css({left:"4000px"});var e=document.elementFromPoint(t.clientX,t.clientY);return O("canvas").css({left:"0px"}),O(e).click(),!1});var f=130;H.shape=new Kinetic.Shape({radius:0,center_x:-f,center_y:-f,width:0,height:0,sceneFunc:function(t){var e=this.getContext("2d")._context,i=(this.pos,e.globalCompositeOperation);e.globalCompositeOperation="destination-out",e.beginPath();var n=this.attrs.center_x-Math.round(this.attrs.width/2),r=this.attrs.center_y-Math.round(this.attrs.height/2);e.roundRect(n,r,this.attrs.width,this.attrs.height,this.attrs.radius),e.fillStyle="red",e.fill(),e.globalCompositeOperation=i}}),H.shape.radius=0,H.layer.add(H.rect),H.layer.add(H.shape),H.kinetic_stage.add(H.layer),O(window).on("resize.enjoy_hint",function(){if(!O(H.stepData.enjoyHintElementSelector).is(":visible"))return H.stopFunction(),void O(window).off("resize.enjoy_hint");var t=window.innerWidth,e=window.innerHeight;H.kinetic_stage.setAttr("width",t),H.kinetic_stage.setAttr("height",e),H.rect=new Kinetic.Rect({fill:"rgba(0,0,0,0.6)",width:t,height:e}),H.layer.removeChildren(),H.layer.add(H.rect),H.layer.add(H.shape),H.layer.draw(),H.kinetic_stage.draw(),H.renderLabelWithShape(H.updateShapeData())});H.enjoyhint,H.$element_dis_events;return H.show=function(){H.enjoyhint.removeClass(H.cl.hide)},H.hide=function(){H.enjoyhint.addClass(H.cl.hide),new Kinetic.Tween({node:H.shape,duration:.002,center_x:-f,center_y:-f}).play()},H.hide(),H.hideNextBtn=function(){H.$next_btn.addClass(H.cl.hide),H.nextBtn="hide"},H.showNextBtn=function(){H.$next_btn.removeClass(H.cl.hide),H.nextBtn="show"},H.hideSkipBtn=function(){H.$skip_btn.addClass(H.cl.hide)},H.showSkipBtn=function(){H.$skip_btn.removeClass(H.cl.hide)},H.hideCloseBtn=function(){H.$close_btn.addClass(H.cl.hide)},H.showCloseBtn=function(){H.$close_btn.removeClass(H.cl.hide)},H.disableEventsOfRect=function(){H.$element_dis_events.show()},H.renderCircle=function(t){var e=t.r||0,i=t.x||0,n=t.y||0;0==t.hidden?new Kinetic.Tween({node:H.shape,duration:.2,center_x:i,center_y:n,width:2*e,height:2*e,radius:e}).play():new Kinetic.Tween({node:H.shape,duration:.002,center_x:-f,center_y:-f}).play();var r=i-e,o=i+e,a=n-e,s=n+e;return{x:i,y:n,left:r,right:o,top:a,bottom:s,conn:{left:{x:r-20,y:n},right:{x:o+20,y:n},top:{x:i,y:a-20},bottom:{x:i,y:s+20}}}},H.renderRect=function(t,e){var i=t.r||0,n=t.x||0,r=t.y||0,o=t.w||0,a=t.h||0;0==t.hidden?new Kinetic.Tween({node:H.shape,duration:e,center_x:n,center_y:r,width:o,height:a,radius:i}).play():new Kinetic.Tween({node:H.shape,duration:.002,center_x:-f,center_y:-f}).play();var s=Math.round(o/2),c=Math.round(a/2),h=n-s,l=n+s,u=r-c,d=r+c;return{x:n,y:r,left:h,right:l,top:u,bottom:d,conn:{left:{x:h-20,y:r},right:{x:l+20,y:r},top:{x:n,y:u-20},bottom:{x:n,y:d+20}}}},H.renderLabel=function(t){var e=t.x||0;H.originalElementX=e;var i=t.y||0,n=H.getLabelElement({x:e,y:i,text:t.text}),r=n.width(),o=n.height(),a=n.offset().left,s=n.offset().left+r,c=n.offset().top-O(document).scrollTop(),h=c+o,l={x:a-10,y:c+Math.round(o/2)},u={x:s+10,y:c+Math.round(o/2)},d={x:a+Math.round(r/2),y:c-10},f={x:a+Math.round(r/2),y:h+10};return n.detach(),setTimeout(function(){O("#enjoyhint_label").remove(),n.appendTo(H.enjoyhint)},H.options.animation_time/2),{label:n,left:a,right:s,top:c,bottom:h,conn:{left:l,right:u,top:d,bottom:f}}},H.renderArrow=function(t){var e=t.x_from||0,i=t.y_from||0,n=t.x_to||0,r=t.y_to||0,o=t.by_top_side,a=0,s=0,c=0,h=0;640<=window.innerWidth&&(o?r<=i?(c=a=.9*e+.1*n,h=.8*(s=r)+.2*i):(h=s=.9*i+.1*r,c=.8*(a=n)+.2*e):r<=i?(h=s=.9*i+.1*r,c=.8*(a=n)+.2*e):(c=a=.9*e+.1*n,h=.8*(s=r)+.2*i));t.text;H.enjoyhint.addClass(H.cl.svg_transparent),setTimeout(function(){var t;O("#enjoyhint_arrow_line").remove(),0==H.stepData.hidden&&640<=window.innerWidth&&(t="M"+e+","+i+" C"+c+","+h+" "+a+","+s+" "+n+","+r,H.$svg.append(l("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:3","marker-end":"url(#arrowMarker)",d:t,id:"enjoyhint_arrow_line"}))),H.enjoyhint.removeClass(H.cl.svg_transparent)},H.options.animation_time/2)},H.getLabelElement=function(t){return O("<div>",{class:"enjoy_hint_label",id:"enjoyhint_label"}).css({top:t.y+"px",left:t.x+"px"}).html(t.text).appendTo(H.enjoyhint)},H.disableEventsNearRect=function(t){r.css({top:"0",left:"0"}).height(t.top),o.css({top:t.bottom+"px",left:"0"}),a.css({top:"0",left:"0px"}).width(t.left),s.css({top:"0",left:t.right+"px"}),H.$element_dis_events.css({top:t.top+"px",left:t.left+"px"}).width(t.right-t.left).height(t.bottom-t.top).hide()},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}},H.renderLabelWithShape=function(t){if(void 0===t)return this;H.stepData=t;var e=function t(e){return"MD-DIALOG"===e.tagName?e:void 0===e.tagName?null:t(O(e).parent()[0])}(O(H.stepData.enjoyHintElementSelector)[0]);null!=e&&O(e).on("dialogClosing",function(){H.stopFunction()}),H.resetComponentStuff();var i=t.shape||"rect",n={},r=0,o=0,a=t.top||0,s=t.bottom||0,c=t.left||0,h=t.right||0;switch(i){case"circle":r=o=t.radius;var l=(p={top:t.center_y-o+a,bottom:t.center_y+o-s,left:t.center_x-r+c,right:t.center_x+r-h}).right-p.left,u=p.bottom-p.top;t.radius=Math.round(Math.min(l,u)/2),r=o=Math.round(t.radius/2);var d=Math.round(l/2),f=Math.round(u/2);t.center_x=p.left+d,t.center_y=p.top+f,n=H.renderCircle({x:t.center_x,y:t.center_y,r:t.radius,hidden:H.stepData.hidden});break;case"rect":r=Math.round(t.width/2),o=Math.round(t.height/2);var p={top:t.center_y-o+a,bottom:t.center_y+o-s,left:t.center_x-r+c,right:t.center_x+r-h};t.width=p.right-p.left,t.height=p.bottom-p.top,r=Math.round(t.width/2),o=Math.round(t.height/2),t.center_x=p.left+r,t.center_y=p.top+o,n=H.renderRect({x:t.center_x,y:t.center_y,w:t.width,h:t.height,r:t.radius,hidden:H.stepData.hidden},.2)}H.enjoyhint.width();var g=H.enjoyhint.height(),v=H.getLabelElement({x:0,y:0,text:t.text}),y=v.outerWidth(),m=v.outerHeight();v.remove();var _=o+150,x="top"==(g-t.center_y<t.center_y?"top":"bottom")?t.center_y-_-m:t.center_y+_,K=m+20+40+20;(x+=t.label_offset_y)+K>window.innerHeight&&(x=window.innerHeight-K),x<0&&(x=0);var b=window.innerWidth/2-y/2+t.label_offset_x,w=H.renderLabel({x:b,y:x,text:t.text});H.$next_btn.css({left:b,top:x+m+20});var S=b+H.$next_btn.width()+10;"hide"==H.nextBtn&&(S=b),H.$skip_btn.css({left:S,top:x+m+20}),H.$close_btn.css({right:10,top:10}),H.disableEventsNearRect({top:n.top,bottom:n.bottom,left:n.left,right:n.right});var C=!1,T="left",k="left",F=w.left<=n.x&&w.right>=n.x,A=w.right<n.x,D=(w.left,n.x,w.right,n.left,w.left,n.right,w.bottom<n.top),P=w.top>n.bottom,L=w.bottom>=n.y&&w.top<=n.y,M=w.bottom<=n.y&&!D,N=w.top>=n.y&&!P;function E(t,e,i){T=t,k=e,C=i}function j(t,e,i,n,r){var o=[];(o=D?t:M?e:L?i:N?n:r)&&E(o[0],o[1],o[2])}if(F)if(D)E("bottom","top","top");else{if(!P)return;E("top","bottom","bottom")}else A?j(["right","top","top"],["bottom","left","bottom"],["right","left","top"],["top","left","top"],["right","bottom","bottom"]):j(["left","top","top"],["bottom","right","bottom"],["left","right","top"],["top","right","top"],["left","bottom","bottom"]);var R=w.conn[T],G=n.conn[k],I="top"==C;H.renderArrow({x_from:R.x,y_from:R.y,x_to:window.innerWidth<640?n.left+(0<n.left):G.x,y_to:window.innerWidth<640?n.conn.left.y:G.y,by_top_side:I})},H.clear=function(){O("#enjoyhint_arrow_line").remove(),O("#enjoyhint_label").remove(),O(window).off("resize.enjoy_hint")},this})},set:function(t){return this.each(function(){this.enjoyhint_obj.setValue(t)}),this},show:function(){return this.each(function(){this.enjoyhint_obj.show()}),this},hide:function(){return this.each(function(){this.enjoyhint_obj.hide()}),this},hide_next:function(){return this.each(function(){this.enjoyhint_obj.hideNextBtn()}),this},show_next:function(){return this.each(function(){this.enjoyhint_obj.showNextBtn()}),this},hide_skip:function(){return this.each(function(){this.enjoyhint_obj.hideSkipBtn()}),this},show_skip:function(){return this.each(function(){this.enjoyhint_obj.showSkipBtn()}),this},hide_close:function(){return this.each(function(){this.enjoyhint_obj.hideCloseBtn()}),this},show_close:function(){return this.each(function(){this.enjoyhint_obj.showCloseBtn()}),this},render_circle:function(t,e,i){return this.each(function(){this.enjoyhint_obj.renderCircle(t,e,i)}),this},render_label:function(t,e,i){return this.each(function(){this.enjoyhint_obj.renderLabel(t,e,i)}),this},render_label_with_shape:function(t,e,i){return this.each(function(){H.stopFunction=e,H.updateShapeData=i,this.enjoyhint_obj.renderLabelWithShape(t)}),this},redo_events_near_rect:function(t){H.disableEventsNearRect({top:t.top,bottom:t.bottom,left:t.left,right:t.right})},clear:function(){return this.each(function(){this.enjoyhint_obj.clear()}),this},close:function(t){return this.each(function(){this.enjoyhint_obj.closePopdown()}),this},disable_element_events:function(){return this.each(function(){this.enjoyhint_obj.disableEventsOfRect()}),this}};O.fn.enjoyhint=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(O.error("Method "+t+" does not exist on $.numinput"),this):e.init.apply(this,arguments)}}(window.jQuery);var Kinetic={};!function(t){var e=Math.PI/180;(Kinetic={version:"5.2.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return!!t&&t.isDragging},isDragReady:function(){var t=Kinetic.DD;return!!t&&!!t.node},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){if(void 0!==e)for(var i=e.split(/\s/g),n=0;n<i.length;n++){var r=i[n];r&&(void 0===this.names[r]&&(this.names[r]=[]),this.names[r].push(t))}},_removeName:function(t,e){if(void 0!==t){var i=this.names[t];if(void 0!==i){for(var n=0;n<i.length;n++){i[n]._id===e&&i.splice(n,1)}0===i.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t},_parseUA:function(t){var e=t.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),r=!!t.match(/IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",mobile:n,ieMobile:r}},UA:void 0}).UA=Kinetic._parseUA(t.navigator&&t.navigator.userAgent||"")}(this),function(t,e){if("object"==typeof exports){var i,n,r=e();return global.window===global?(Kinetic.document=global.document,Kinetic.window=global):(i=require("canvas"),n=require("jsdom").jsdom,Kinetic.document=n("<!DOCTYPE html><html><head></head><body></body></html>"),Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=i.Image,Kinetic._nodeCanvas=i),Kinetic.root=t,module.exports=r}"function"==typeof define&&define.amd&&define(e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,i=0;for(this.length=e;i<e;i++)this[i]=t[i];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){for(var t=[],e=this.length,i=0;i<e;i++)t.push(this[i]);return t},Kinetic.Collection.toCollection=function(t){for(var e=new Kinetic.Collection,i=t.length,n=0;n<i;n++)e.push(t[n]);return e},Kinetic.Collection._mapMethod=function(n){Kinetic.Collection.prototype[n]=function(){for(var t=this.length,e=[].slice.call(arguments),i=0;i<t;i++)this[i][n].apply(this[i],e);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var i in e)Kinetic.Collection._mapMethod(i)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,r=this.m[1]*e+this.m[3]*i,o=this.m[0]*-i+this.m[2]*e,a=this.m[1]*-i+this.m[3]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=o,this.m[3]=a,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=o,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=o,this.m[5]=a,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=o,this.m[5]=a,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var i=this.m[0],n=this.m[1],r=this.m[2],o=this.m[3],a=this.m[4],s=(i*(e-this.m[5])-n*(t-a))/(i*o-n*r),c=(t-a-r*s)/i;return this.translate(c,s)}};var e=Math.PI/180,i=180/Math.PI,n={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},r=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"==Object.prototype.toString.call(t)},_isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},_throttle:function(i,n,t){function r(){h=!1===l.leading?0:(new Date).getTime(),c=null,s=i.apply(o,a),o=a=null}var o,a,s,c=null,h=0,l=t||{};return function(){var t=(new Date).getTime();h||!1!==l.leading||(h=t);var e=n-(t-h);return o=this,a=arguments,e<=0?(clearTimeout(c),c=null,h=t,s=i.apply(o,a),o=a=null):c||!1===l.trailing||(c=setTimeout(r,e)),s}},_hasMethods:function(t){var e,i=[];for(e in t)this._isFunction(t[e])&&i.push(e);return 0<i.length},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){for(var e,i=[],n=t.length,r=Kinetic.Util,o=0;o<n;o++)e=t[o],r._isNumber(e)?e=Math.round(1e3*e)/1e3:r._isString(e)||(e=e.toString()),i.push(e);return i},_getImage:function(t,e){var i,n;t?this._isElement(t)?e(t):this._isString(t)?((i=new Kinetic.window.Image).onload=function(){e(i)},i.src=t):t.data?((n=Kinetic.Util.createCanvasElement()).width=t.width,n.height=t.height,n.getContext("2d").putImageData(t,0,0),this._getImage(n.toDataURL(),e)):e(null):e(null)},_getRGBAString:function(t){return["rgba(",t.red||0,",",t.green||0,",",t.blue||0,",",t.alpha||1,")"].join("")},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in n?{r:(e=n[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=r.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var i=this._clone(e);for(var n in t)i[n]=this._isObject(t[n])?this._merge(t[n],i[n]):t[n];return i},cloneObject:function(t){var e={};for(var i in t)e[i]=this._isObject(t[i])?this.cloneObject(t[i]):this._isArray(t[i])?this.cloneArray(t[i]):t[i];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*e},_radToDeg:function(t){return t*i},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error("Kinetic error: "+t)},warn:function(t){Kinetic.root.console&&console.warn&&Kinetic.showWarnings&&console.warn("Kinetic warning: "+t)},extend:function(t,e){function i(){this.constructor=t}i.prototype=e.prototype;var n=t.prototype;for(var r in t.prototype=new i,n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);t.__super__=e.prototype},addMethods:function(t,e){var i;for(i in e)t.prototype[i]=e[i]},_getControlPoints:function(t,e,i,n,r,o,a){var s=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),c=Math.sqrt(Math.pow(r-i,2)+Math.pow(o-n,2)),h=a*s/(s+c),l=a*c/(s+c);return[i-h*(r-t),n-h*(o-e),i+l*(r-t),n+l*(o-e)]},_expandPoints:function(t,e){for(var i,n=t.length,r=[],o=2;o<n-2;o+=2)i=Kinetic.Util._getControlPoints(t[o-2],t[o-1],t[o],t[o+1],t[o+2],t[o+3],e),r.push(i[0]),r.push(i[1]),r.push(t[o]),r.push(t[o+1]),r.push(i[2]),r.push(i[3]);return r},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=Kinetic.Util.createCanvasElement().getContext("2d"),i=Kinetic.UA.mobile?(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1):1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){var e=(t||{}).pixelRatio||Kinetic.pixelRatio||i;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return Kinetic.Util.warn("Unable to get data URL. "+t.message),""}}}},Kinetic.SceneCanvas=function(t){var e=t||{},i=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.SceneContext(this),this.setSize(i,n)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),i.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),i.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){var e=t||{},i=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.HitContext(this),this.setSize(i,n),this.hitCanvas=!0},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){t.getFillEnabled()&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(t){for(var e,i,n,r=this.traceArr,o=r.length,a="",s=0;s<o;s++)(i=(e=r[s]).method)?(n=e.args,a+=i,a+=t?"()":Kinetic.Util._isArray(n[0])?"(["+n.join(",")+"])":"("+n.join(",")+")"):(a+=e.property,t||(a+="="+e.val)),a+=";";return a},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e=this.traceArr;e.push(t),e.length>=Kinetic.traceArrMax&&e.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(+t,0,0,+t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){for(var n,r=this,t=a.length,o=Kinetic.Util._simplifyArray,e=this.setAttr,i=0;i<t;i++)!function(t){var e,i=r[t];r[t]=function(){return n=o(Array.prototype.slice.call(arguments,0)),e=i.apply(r,arguments),r._trace({method:t,args:n}),e}}(a[i]);r.setAttr=function(){e.apply(r,arguments),r._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),i=t.getFillPatternX(),n=t.getFillPatternY(),r=t.getFillPatternScale(),o=Kinetic.getAngle(t.getFillPatternRotation()),a=t.getFillPatternOffset(),s=t.getFillPatternRepeat();(i||n)&&this.translate(i||0,n||0),o&&this.rotate(o),r&&this.scale(r.x,r.y),a&&this.translate(-1*a.x,-1*a.y),this.setAttr("fillStyle",this.createPattern(e,s||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),i=t.getFillLinearGradientEndPoint(),n=t.getFillLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(var o=0;o<n.length;o+=2)r.addColorStop(n[o],n[o+1]);this.setAttr("fillStyle",r),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),i=t.getFillRadialGradientEndPoint(),n=t.getFillRadialGradientStartRadius(),r=t.getFillRadialGradientEndRadius(),o=t.getFillRadialGradientColorStops(),a=this.createRadialGradient(e.x,e.y,n,i.x,i.y,r),s=0;s<o.length;s+=2)a.addColorStop(o[s],o[s+1]);this.setAttr("fillStyle",a),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),i=t.getFillPatternImage(),n=t.getFillLinearGradientColorStops(),r=t.getFillRadialGradientColorStops(),o=t.getFillPriority();e&&"color"===o?this._fillColor(t):i&&"pattern"===o?this._fillPattern(t):n&&"linear-gradient"===o?this._fillLinearGradient(t):r&&"radial-gradient"===o?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):n?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),i=t.getStrokeScaleEnabled();t.hasStroke()&&(i||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),i||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,i=t.getAbsoluteOpacity(),n=e.get(t.getShadowColor(),"black"),r=e.get(t.getShadowBlur(),5),o=e.get(t.getShadowOpacity(),1),a=e.get(t.getShadowOffset(),{x:0,y:0});o&&this.setAttr("globalAlpha",o*i),this.setAttr("shadowColor",n),this.setAttr("shadowBlur",r),this.setAttr("shadowOffsetX",a.x),this.setAttr("shadowOffsetY",a.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),Kinetic.Factory={addGetterSetter:function(t,e,i,n,r){this.addGetter(t,e,i),this.addSetter(t,e,n,r),this.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,i){var n="get"+Kinetic.Util._capitalize(e);t.prototype[n]=function(){var t=this.attrs[e];return void 0===t?i:t}},addSetter:function(t,e,i,n){var r="set"+Kinetic.Util._capitalize(e);t.prototype[r]=function(t){return i&&(t=i.call(this,t)),this._setAttr(e,t),n&&n.call(this),this}},addComponentsGetterSetter:function(t,n,e,r,o){var i,a,s=e.length,c=Kinetic.Util._capitalize,h="get"+c(n),l="set"+c(n);t.prototype[h]=function(){var t={};for(i=0;i<s;i++)t[a=e[i]]=this.getAttr(n+c(a));return t},t.prototype[l]=function(t){var e,i=this.attrs[n];for(e in r&&(t=r.call(this,t)),t)this._setAttr(n+c(e),t[e]);return this._fireChangeEvent(n,i,t),o&&o.call(this),this},this.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter:function(t,e){var i=Kinetic.Util._capitalize(e),n="set"+i,r="get"+i;t.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[r]()}},backCompat:function(t,e){var i;for(i in e)t.prototype[i]=t.prototype[e[i]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return 255<t?255:t<0?0:Math.round(t)},alphaComponent:function(t){return 1<t?1:t<1e-4?1e-4:t}},function(){var i="absoluteOpacity",n="absoluteTransform",r="listening",o="mouseenter",a="mouseleave",s="transform",c="visible",l=["id"],h=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(" ");Kinetic.Util.addMethods(Kinetic.Node,{_init:function(t){var e=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(t),this.on(h,function(){this._clearCache(s),e._clearSelfAndDescendantCache(n)}),this.on("visibleChange.kinetic",function(){e._clearSelfAndDescendantCache(c)}),this.on("listeningChange.kinetic",function(){e._clearSelfAndDescendantCache(r)}),this.on("opacityChange.kinetic",function(){e._clearSelfAndDescendantCache(i)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){return void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(e){this._clearCache(e),this.children&&this.getChildren().each(function(t){t._clearSelfAndDescendantCache(e)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},i=e.x||0,n=e.y||0,r=e.width||this.width(),o=e.height||this.height(),a=e.drawBorder||!1;if(0!==r&&0!==o){var s=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:o}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:o}),h=new Kinetic.HitCanvas({width:r,height:o}),l=s.getContext(),u=h.getContext();return h.isCache=!0,this.clearCache(),l.save(),u.save(),a&&(l.save(),l.beginPath(),l.rect(0,0,r,o),l.closePath(),l.setAttr("strokeStyle","red"),l.setAttr("lineWidth",5),l.stroke(),l.restore()),l.translate(-1*i,-1*n),u.translate(-1*i,-1*n),"Shape"===this.nodeType&&(l.translate(-1*this.x(),-1*this.y()),u.translate(-1*this.x(),-1*this.y())),this.drawScene(s,this),this.drawHit(h,this),l.restore(),u.restore(),this._cache.canvas={scene:s,filter:c,hit:h},this}Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.")},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t._applyOpacity(this),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,i,n=this.filters(),r=this._cache.canvas,o=r.scene,a=r.filter,s=a.getContext();if(n){if(!this._filterUpToDate){try{for(t=n.length,s.clear(),s.drawImage(o._canvas,0,0),e=s.getImageData(0,0,a.getWidth(),a.getHeight()),i=0;i<t;i++)n[i].call(this,e),s.putImageData(e,0,0)}catch(t){Kinetic.Util.warn("Unable to apply filter. "+t.message)}this._filterUpToDate=!0}return a}return o},_drawCachedHitCanvas:function(t){var e=this._cache.canvas.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(e._canvas,0,0),t.restore()},on:function(t,e){for(var i,n,r,o=t.split(" "),a=o.length,s=0;s<a;s++)n=(i=o[s].split("."))[0],r=i[1]||"",this.eventListeners[n]||(this.eventListeners[n]=[]),this.eventListeners[n].push({name:r,handler:e});return this},off:function(t){var e,i,n,r,o,a=(t||"").split(" "),s=a.length;if(!t)for(i in this.eventListeners)this._off(i);for(e=0;e<s;e++)if(r=(n=a[e].split("."))[0],o=n[1],r)this.eventListeners[r]&&this._off(r,o);else for(i in this.eventListeners)this._off(i,o);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},removeEventListener:function(t){this.off(t)},remove:function(){var t=this.getParent();return t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(n),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(r),this._clearSelfAndDescendantCache(i),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e="get"+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,i;if(t)for(e in t)"children"===e||t[e]instanceof Kinetic.Node||(i="set"+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(r,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},isVisible:function(){return this._getCache(c,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?!e||e.isVisible():t},shouldDrawHit:function(t){var e=this.getLayer();return t&&t.isCache||e&&e.hitGraphEnabled()&&this.isListening()&&this.isVisible()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){var i,n,r,o,a=this.getDepth(),s=this,c=0;return"Stage"!==s.nodeType&&function t(e){for(i=[],n=e.length,r=0;r<n;r++)o=e[r],c++,"Shape"!==o.nodeType&&(i=i.concat(o.getChildren().toArray())),o._id===s._id&&(r=n);0<i.length&&i[0].getDepth()<=a&&t(i)}(s.getStage().getChildren()),c},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,i=this.offset();return e.m=t.slice(),e.translate(i.x,i.y),e.getTranslation()},setAbsolutePosition:function(t){var e,i=this._clearTransform();return this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(i),this},_setTransform:function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(s),this._clearSelfAndDescendantCache(n)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(s),this._clearSelfAndDescendantCache(n),t},move:function(t){var e=t.x,i=t.y,n=this.getX(),r=this.getY();return void 0!==e&&(n+=e),void 0!==i&&(r+=i),this.setPosition({x:n,y:r}),this},_eachAncestorReverse:function(t,e){var i,n,r=[],o=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(r.unshift(this);o&&(!e||o._id!==e._id);)r.unshift(o),o=o.parent;for(i=r.length,n=0;n<i;n++)t(r[n])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(this.parent){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0}Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.")},moveUp:function(){if(this.parent){var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}Kinetic.Util.warn("Node has no parent. moveUp function is ignored.")},moveDown:function(){if(this.parent){var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}Kinetic.Util.warn("Node has no parent. moveDown function is ignored.")},moveToBottom:function(){if(this.parent){var t=this.index;return 0<t&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.")},setZIndex:function(t){if(this.parent){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.")},getAbsoluteOpacity:function(){return this._getCache(i,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return this.getParent()!==t&&(this.remove(),t.add(this)),this},toObject:function(){var t,e,i,n=Kinetic.Util,r={},o=this.getAttrs();for(t in r.attrs={},o)e=o[t],n._isFunction(e)||n._isElement(e)||n._isObject(e)&&n._hasMethods(e)||(i=this[t],delete o[t],(i?i.call(this):null)!==(o[t]=e)&&(r.attrs[t]=e));return r.className=this.getClassName(),r},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache("stage",this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,i){return i?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(n,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,i,n=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),i=t.getTransform(),"all"===e?n.multiply(i):"position"===e&&n.translate(t.x(),t.y())},t),n},getTransform:function(){return this._getCache(s,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),i=this.getY(),n=Kinetic.getAngle(this.getRotation()),r=this.getScaleX(),o=this.getScaleY(),a=this.getSkewX(),s=this.getSkewY(),c=this.getOffsetX(),h=this.getOffsetY();return 0===e&&0===i||t.translate(e,i),0!==n&&t.rotate(n),0===a&&0===s||t.skew(a,s),1===r&&1===o||t.scale(r,o),0===c&&0===h||t.translate(-1*c,-1*h),t},clone:function(t){var e,i,n,r,o,a=this.getClassName(),s=Kinetic.Util.cloneObject(this.attrs);for(var c in l){delete s[l[c]]}for(e in t)s[e]=t[e];var h=new Kinetic[a](s);for(e in this.eventListeners)for(n=(i=this.eventListeners[e]).length,r=0;r<n;r++)(o=i[r]).name.indexOf("kinetic")<0&&(h.eventListeners[e]||(h.eventListeners[e]=[]),h.eventListeners[e].push(o));return h},toDataURL:function(t){var e=(t=t||{}).mimeType||null,i=t.quality||null,n=this.getStage(),r=t.x||0,o=t.y||0,a=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(n?n.getWidth():0),height:t.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:1}),s=a.getContext();return s.save(),(r||o)&&s.translate(-1*r,-1*o),this.drawScene(a),s.restore(),a.toDataURL(e,i)},toImage:function(e){Kinetic.Util._getImage(this.toDataURL(e),function(t){e.callback(t)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},_off:function(t,e){for(var i,n=this.eventListeners[t],r=0;r<n.length;r++)if(!("kinetic"===(i=n[r].name)&&"kinetic"!==e||e&&i!==e)){if(n.splice(r,1),0===n.length){delete this.eventListeners[t];break}r--}},_fireChangeEvent:function(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr("id",t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr("name",t),this},setAttr:function(t,e){var i=this["set"+Kinetic.Util._capitalize(t)];return Kinetic.Util._isFunction(i)?i.call(this,e):this._setAttr(t,e),this},_setAttr:function(t,e){var i;void 0!==e&&(i=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,i,e))},_setComponentAttr:function(t,e,i){var n;void 0!==i&&((n=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))},_fireAndBubble:function(t,e,i){var n,r=!0;e&&"Shape"===this.nodeType&&(e.target=this),(t===o&&i&&(this._id===i._id||this.isAncestorOf&&this.isAncestorOf(i))||t===a&&i&&(this._id===i._id||this.isAncestorOf&&this.isAncestorOf(i)))&&(r=!1),r&&(this._fire(t,e),n=(t===o||t===a)&&(i&&i.isAncestorOf&&i.isAncestorOf(this)||!(!i||!i.isAncestorOf)),e&&!e.cancelBubble&&this.parent&&this.parent.isListening()&&!n&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var i,n=this.eventListeners[t];if(e.type=t,n)for(i=0;i<n.length;i++)n[i].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var i,n,r,o=Kinetic.Node.prototype.getClassName.call(t),a=t.children;if(e&&(t.attrs.container=e),i=new Kinetic[o](t.attrs),a)for(n=a.length,r=0;r<n;r++)i.add(this._createNode(a[r]));return i},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),Kinetic.Filters.Grayscale=function(t){for(var e,i=t.data,n=i.length,r=0;r<n;r+=4)e=.34*i[r]+.5*i[r+1]+.16*i[r+2],i[r]=e,i[r+1]=e,i[r+2]=e},Kinetic.Filters.Brighten=function(t){for(var e=255*this.brightness(),i=t.data,n=i.length,r=0;r<n;r+=4)i[r]+=e,i[r+1]+=e,i[r+2]+=e},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Invert=function(t){for(var e=t.data,i=e.length,n=0;n<i;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]},function(){function H(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var B=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],W=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var e=Math.round(this.blurRadius());0<e&&function(t,e){for(var i,n,r,o,a,s,c,h,l,u,d,f,p,g,v,y,m,_,x,K,b,w,S,C=t.data,T=t.width,k=t.height,F=e+e+1,A=T-1,D=k-1,P=e+1,L=P*(P+1)/2,M=new H,N=null,E=M,j=null,R=null,G=B[e],I=W[e],O=1;O<F;O++)E=E.next=new H,O==P&&(N=E);for(E.next=M,n=s=a=0;n<k;n++){for(v=y=m=_=c=h=l=u=0,d=P*(x=C[a]),f=P*(K=C[a+1]),p=P*(b=C[a+2]),g=P*(w=C[a+3]),c+=L*x,h+=L*K,l+=L*b,u+=L*w,E=M,O=0;O<P;O++)E.r=x,E.g=K,E.b=b,E.a=w,E=E.next;for(O=1;O<P;O++)r=a+((A<O?A:O)<<2),c+=(E.r=x=C[r])*(S=P-O),h+=(E.g=K=C[r+1])*S,l+=(E.b=b=C[r+2])*S,u+=(E.a=w=C[r+3])*S,v+=x,y+=K,m+=b,_+=w,E=E.next;for(j=M,R=N,i=0;i<T;i++)C[a+3]=w=u*G>>I,0!==w?(w=255/w,C[a]=(c*G>>I)*w,C[a+1]=(h*G>>I)*w,C[a+2]=(l*G>>I)*w):C[a]=C[a+1]=C[a+2]=0,c-=d,h-=f,l-=p,u-=g,d-=j.r,f-=j.g,p-=j.b,g-=j.a,r=s+((r=i+e+1)<A?r:A)<<2,c+=v+=j.r=C[r],h+=y+=j.g=C[r+1],l+=m+=j.b=C[r+2],u+=_+=j.a=C[r+3],j=j.next,d+=x=R.r,f+=K=R.g,p+=b=R.b,g+=w=R.a,v-=x,y-=K,m-=b,_-=w,R=R.next,a+=4;s+=T}for(i=0;i<T;i++){for(y=m=_=v=h=l=u=c=0,d=P*(x=C[a=i<<2]),f=P*(K=C[a+1]),p=P*(b=C[a+2]),g=P*(w=C[a+3]),c+=L*x,h+=L*K,l+=L*b,u+=L*w,E=M,O=0;O<P;O++)E.r=x,E.g=K,E.b=b,E.a=w,E=E.next;for(o=T,O=1;O<=e;O++)a=o+i<<2,c+=(E.r=x=C[a])*(S=P-O),h+=(E.g=K=C[a+1])*S,l+=(E.b=b=C[a+2])*S,u+=(E.a=w=C[a+3])*S,v+=x,y+=K,m+=b,_+=w,E=E.next,O<D&&(o+=T);for(a=i,j=M,R=N,n=0;n<k;n++)C[(r=a<<2)+3]=w=u*G>>I,0<w?(w=255/w,C[r]=(c*G>>I)*w,C[r+1]=(h*G>>I)*w,C[r+2]=(l*G>>I)*w):C[r]=C[r+1]=C[r+2]=0,c-=d,h-=f,l-=p,u-=g,d-=j.r,f-=j.g,p-=j.b,g-=j.a,r=i+((r=n+P)<D?r:D)*T<<2,c+=v+=j.r=C[r],h+=y+=j.g=C[r+1],l+=m+=j.b=C[r+2],u+=_+=j.a=C[r+3],j=j.next,d+=x=R.r,f+=K=R.g,p+=b=R.b,g+=w=R.a,v-=x,y-=K,m-=b,_-=w,R=R.next,a+=T}}(t,e)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function u(t,e,i){var n=4*(i*t.width+e),r=[];return r.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),r}function d(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function i(t,e){var i=u(t,0,0),n=u(t,t.width-1,0),r=u(t,0,t.height-1),o=u(t,t.width-1,t.height-1),a=e||10;if(d(i,n)<a&&d(n,o)<a&&d(o,r)<a&&d(r,i)<a){for(var s=function(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,i,o,r]),c=[],h=0;h<t.width*t.height;h++){var l=d(s,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);c[h]=l<a?0:255}return c}}Kinetic.Filters.Mask=function(t){var e=i(t,this.threshold());return e&&function(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}(t,function(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),a=[],s=0;s<i;s++)for(var c=0;c<e;c++){for(var h=s*e+c,l=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f,p=s+u-o,g=c+d-o;0<=p&&p<i&&0<=g&&g<e&&(f=n[u*r+d],l+=t[p*e+g]*f)}a[h]=l}return a}(function(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),a=[],s=0;s<i;s++)for(var c=0;c<e;c++){for(var h=s*e+c,l=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f,p=s+u-o,g=c+d-o;0<=p&&p<i&&0<=g&&g<e&&(f=n[u*r+d],l+=t[p*e+g]*f)}a[h]=1020<=l?255:0}return a}(function(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),a=[],s=0;s<i;s++)for(var c=0;c<e;c++){for(var h=s*e+c,l=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f,p=s+u-o,g=c+d-o;0<=p&&p<i&&0<=g&&g<e&&(f=n[u*r+d],l+=t[p*e+g]*f)}a[h]=2040===l?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),Kinetic.Filters.RGB=function(t){for(var e,i=t.data,n=i.length,r=this.red(),o=this.green(),a=this.blue(),s=0;s<n;s+=4)e=(.34*i[s]+.5*i[s+1]+.16*i[s+2])/255,i[s]=e*r,i[s+1]=e*o,i[s+2]=e*a,i[s+3]=i[s+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,255<t?255:t<0?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSV=function(t){for(var e,i,n,r,o=t.data,a=o.length,s=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=s*c*Math.cos(h*Math.PI/180),u=s*c*Math.sin(h*Math.PI/180),d=.299*s+.701*l+.167*u,f=.587*s-.587*l+.33*u,p=.114*s-.114*l-.497*u,g=.299*s-.299*l-.328*u,v=.587*s+.413*l+.035*u,y=.114*s-.114*l+.293*u,m=.299*s-.3*l+1.25*u,_=.587*s-.586*l-1.05*u,x=.114*s+.886*l-.2*u,K=0;K<a;K+=4)e=o[K+0],i=o[K+1],n=o[K+2],r=o[K+3],o[K+0]=d*e+f*i+p*n,o[K+1]=g*e+v*i+y*n,o[K+2]=m*e+_*i+x*n,o[K+3]=r},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(t){for(var e,i,n,r,o=t.data,a=o.length,s=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=127*this.luminance(),l=s*Math.cos(c*Math.PI/180),u=s*Math.sin(c*Math.PI/180),d=.299+.701*l+.167*u,f=.587-.587*l+.33*u,p=.114-.114*l-.497*u,g=.299-.299*l-.328*u,v=.587+.413*l+.035*u,y=.114-.114*l+.293*u,m=.299-.3*l+1.25*u,_=.587-.586*l-1.05*u,x=.114+.886*l-.2*u,K=0;K<a;K+=4)e=o[K+0],i=o[K+1],n=o[K+2],r=o[K+3],o[K+0]=d*e+f*i+p*n+h,o[K+1]=g*e+v*i+y*n+h,o[K+2]=m*e+_*i+x*n+h,o[K+3]=r},Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),r=this.embossBlend(),o=0,a=0,s=t.data,c=t.width,h=t.height,l=4*c,u=h;switch(n){case"top-left":a=o=-1;break;case"top":o=-1,a=0;break;case"top-right":o=-1,a=1;break;case"right":o=0,a=1;break;case"bottom-right":a=o=1;break;case"bottom":o=1,a=0;break;case"bottom-left":a=-(o=1);break;case"left":o=0,a=-1}do{var d=(u-1)*l,f=o;u+f<1&&(f=0),h<u+f&&(f=0);var p=(u-1+f)*c*4,g=c;do{var v=d+4*(g-1),y=a;g+y<1&&(y=0),c<g+y&&(y=0);var m,_,x,K,b=p+4*(g-1+y),w=s[v]-s[b],S=s[1+v]-s[1+b],C=s[2+v]-s[2+b],T=w,k=0<T?T:-T;k<(0<S?S:-S)&&(T=S),k<(0<C?C:-C)&&(T=C),T*=e,r?(m=s[v]+T,_=s[1+v]+T,x=s[2+v]+T,s[v]=255<m?255:m<0?0:m,s[1+v]=255<_?255:_<0?0:_,s[2+v]=255<x?255:x<0?0:x):((K=i-T)<0?K=0:255<K&&(K=255),s[v]=s[1+v]=s[2+v]=K)}while(--g)}while(--u)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter),function(){function w(t,e,i,n,r){var o=i-e,a=r-n;return 0==o?n+a/2:0==a?n:a*((t-e)/o)+n}Kinetic.Filters.Enhance=function(t){var e,i,n,r,o,a,s,c,h,l,u,d,f,p=t.data,g=p.length,v=p[0],y=v,m=p[1],_=m,x=p[2],K=x,b=this.enhance();if(0!==b){for(r=0;r<g;r+=4)(e=p[r+0])<v?v=e:y<e&&(y=e),(i=p[r+1])<m?m=i:_<i&&(_=i),(n=p[r+2])<x?x=n:K<n&&(K=n);for(y===v&&(y=255,v=0),_===m&&(_=255,m=0),K===x&&(K=255,x=0),f=0<b?(a=y+b*(255-y),s=v-b*v,h=_+b*(255-_),l=m-b*m,d=K+b*(255-K),x-b*x):(a=y+b*(y-(o=.5*(y+v))),s=v+b*(v-o),h=_+b*(_-(c=.5*(_+m))),l=m+b*(m-c),d=K+b*(K-(u=.5*(K+x))),x+b*(x-u)),r=0;r<g;r+=4)p[r+0]=w(p[r+0],v,y,s,a),p[r+1]=w(p[r+1],m,_,l,h),p[r+2]=w(p[r+2],x,K,f,d)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),Kinetic.Filters.Posterize=function(t){for(var e=Math.round(254*this.levels())+1,i=t.data,n=i.length,r=255/e,o=0;o<n;o+=1)i[o]=Math.floor(i[o]/r)*r},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Noise=function(t){for(var e=255*this.noise(),i=t.data,n=i.length,r=e/2,o=0;o<n;o+=4)i[o+0]+=r-2*r*Math.random(),i[o+1]+=r-2*r*Math.random(),i[o+2]+=r-2*r*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Pixelate=function(t){var e,i,n,r,o,a,s,c,h,l,u,d,f,p,g=Math.ceil(this.pixelSize()),v=t.width,y=t.height,m=Math.ceil(v/g),_=Math.ceil(y/g);for(t=t.data,d=0;d<m;d+=1)for(f=0;f<_;f+=1){for(h=(c=d*g)+g,u=(l=f*g)+g,p=s=a=o=r=0,e=c;e<h;e+=1)if(!(v<=e))for(i=l;i<u;i+=1)y<=i||(r+=t[(n=4*(v*i+e))+0],o+=t[n+1],a+=t[n+2],s+=t[n+3],p+=1);for(r/=p,o/=p,a/=p,e=c;e<h;e+=1)if(!(v<=e))for(i=l;i<u;i+=1)y<=i||(t[(n=4*(v*i+e))+0]=r,t[n+1]=o,t[n+2]=a,t[n+3]=s)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Threshold=function(t){for(var e=255*this.threshold(),i=t.data,n=i.length,r=0;r<n;r+=1)i[r]=i[r]<e?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.Sepia=function(t){var e,i,n,r,o,a,s,c,h,l=t.data,u=t.width,d=t.height,f=4*u;do{for(e=(d-1)*f,i=u;s=.393*(r=l[n=e+4*(i-1)])+.769*(o=l[1+n])+.189*(a=l[2+n]),c=.349*r+.686*o+.168*a,h=.272*r+.534*o+.131*a,l[n]=255<s?255:s,l[1+n]=255<c?255:c,l[2+n]=255<h?255:h,l[3+n]=l[3+n],--i;);}while(--d)},Kinetic.Filters.Solarize=function(t){var e=t.data,i=t.width,n=4*i,r=t.height;do{var o=(r-1)*n,a=i;do{var s=o+4*(a-1),c=e[s],h=e[1+s],l=e[2+s];127<c&&(c=255-c),127<h&&(h=255-h),127<l&&(l=255-l),e[s]=c,e[1+s]=h,e[2+s]=l}while(--a)}while(--r)},function(){var K=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(t){var e,i,n,r,o,a,s,c,h,l=t.width,u=t.height,d=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),p=Math.floor(l*(f%360)/360);if(!(d<1)){K.width=l,K.height=u;var g=K.getContext("2d").getImageData(0,0,l,u);!function(t,e,i){for(var n,r,o,a,s,c,h,l,u=t.data,d=e.data,f=t.width,p=t.height,g=i.polarCenterX||f/2,v=i.polarCenterY||p/2,y=Math.sqrt(g*g+v*v),m=f-g,_=p-v,x=Math.sqrt(m*m+_*_),y=y<x?x:y,K=p,b=f,w=360/b*Math.PI/180,S=0;S<b;S+=1)for(h=Math.sin(S*w),l=Math.cos(S*w),c=0;c<K;c+=1)m=Math.floor(g+y*c/K*l),r=u[0+(n=4*(Math.floor(v+y*c/K*h)*f+m))],o=u[1+n],a=u[2+n],s=u[3+n],d[0+(n=4*(S+c*f))]=r,d[1+n]=o,d[2+n]=a,d[3+n]=s}(t,g,{polarCenterX:l/2,polarCenterY:u/2});for(var v=l/Math.pow(2,d);v<=8;)v*=2,--d;var y=v=Math.ceil(v),m=0,_=y,x=1;for(l<p+v&&(m=y,_=0,x=-1),i=0;i<u;i+=1)for(e=m;e!==_;e+=x)c=4*(l*i+Math.round(e+p)%l),r=g.data[c+0],o=g.data[c+1],a=g.data[c+2],s=g.data[c+3],h=4*(l*i+e),g.data[h+0]=r,g.data[h+1]=o,g.data[h+2]=a,g.data[h+3]=s;for(i=0;i<u;i+=1)for(y=Math.floor(v),n=0;n<d;n+=1){for(e=0;e<y+1;e+=1)c=4*(l*i+e),r=g.data[c+0],o=g.data[c+1],a=g.data[c+2],s=g.data[c+3],h=4*(l*i+2*y-e-1),g.data[h+0]=r,g.data[h+1]=o,g.data[h+2]=a,g.data[h+3]=s;y*=2}!function(t,e,i){var n,r,o,a,s,c,h,l,u,d,f=t.data,p=e.data,g=t.width,v=t.height,y=i.polarCenterX||g/2,m=i.polarCenterY||v/2,_=Math.sqrt(y*y+m*m),x=g-y,K=v-m,b=Math.sqrt(x*x+K*K),_=_<b?b:_,w=v,S=g,C=i.polarRotation||0;for(x=0;x<g;x+=1)for(K=0;K<v;K+=1)r=x-y,o=K-m,l=Math.sqrt(r*r+o*o)*w/_,u=(180*Math.atan2(o,r)/Math.PI+360+C)%360*S/360,d=Math.floor(u),a=f[0+(n=4*(Math.floor(l)*g+d))],s=f[1+n],c=f[2+n],h=f[3+n],p[0+(n=4*(K*g+x))]=a,p[1+n]=s,p[2+n]=c,p[3+n]=h}(g,t,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){setTimeout(t,1e3/60)}var l=Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()},e=Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t;Kinetic.Animation=function(t,e){var i=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=i.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:l()}},Kinetic.Animation.prototype={setLayers:function(t){var e=t?0<t.length?t:[t]:[];this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,i,n=this.layers;if(n){for(e=n.length,i=0;i<e;i++)if(n[i]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){for(var t=Kinetic.Animation.animations,e=t.length,i=0;i<e;i++)if(t[i].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=l(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){for(var e=t.id,i=this.animations,n=i.length,r=0;r<n;r++)if(i[r].id===e){this.animations.splice(r,1);break}},Kinetic.Animation._runFrames=function(){for(var t,e,i,n,r,o,a,s={},c=this.animations,h=0;h<c.length;h++)if(e=(t=c[h]).layers,i=t.func,t._updateFrameObject(l()),r=e.length,!i||!1!==i.call(t,t.frame))for(n=0;n<r;n++)void 0!==(o=e[n])._id&&(s[o._id]=o);for(a in s)s[a].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(function(){e.apply(Kinetic.root,arguments)}(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,this._animationLoop())};var i=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){i.call(this,t)},Kinetic.BaseLayer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&500<l()-t.lastBatchDrawTime&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=l(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}(),function(){var c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=0;Kinetic.Tween=function(t){var e,i=this,n=t.node,r=n._id,o=t.easing||Kinetic.Easings.Linear,a=!!t.yoyo,s=void 0===t.duration?1:0===t.duration?.001:t.duration;for(e in this.node=n,this._id=h++,this.anim=new Kinetic.Animation(function(){i.tween.onEnterFrame()},n.getLayer()||(n instanceof Kinetic.Stage?n.getLayers():null)),this.tween=new l(e,function(t){i._tweenFunc(t)},o,0,1,1e3*s,a),this._addListeners(),Kinetic.Tween.attrs[r]||(Kinetic.Tween.attrs[r]={}),Kinetic.Tween.attrs[r][this._id]||(Kinetic.Tween.attrs[r][this._id]={}),Kinetic.Tween.tweens[r]||(Kinetic.Tween.tweens[r]={}),t)void 0===c[e]&&this._addAttr(e,t[e]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var i,n,r,o,a=this.node,s=a._id,c=Kinetic.Tween.tweens[s][t];if(c&&delete Kinetic.Tween.attrs[s][c][t],i=a.getAttr(t),Kinetic.Util._isArray(e))for(n=[],o=e.length,r=0;r<o;r++)n.push(e[r]-i[r]);else n=e-i;Kinetic.Tween.attrs[s][this._id][t]={start:i,diff:n},Kinetic.Tween.tweens[s][t]=this._id},_tweenFunc:function(t){var e,i,n,r,o,a,s,c=this.node,h=Kinetic.Tween.attrs[c._id][this._id];for(e in h){if(n=(i=h[e]).start,r=i.diff,Kinetic.Util._isArray(n))for(o=[],s=n.length,a=0;a<s;a++)o.push(n[a]+r[a]*t);else o=n+r*t;c.setAttr(e,o)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.tween.reset(),this},seek:function(t){return this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.tween.finish(),this},destroy:function(){var t,e=this.node._id,i=this._id,n=Kinetic.Tween.tweens[e];for(t in this.pause(),n)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][i]}};var l=function(t,e,i,n,r,o,a){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=r-this.begin,this.pause()};l.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},pause:function(){this.state=1,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,i,n){return i*(t/=n)*t*(2.70158*t-1.70158)+e},BackEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*(2.70158*t+1.70158)+1)+e},BackEaseInOut:function(t,e,i,n){var r=1.70158;return(t/=n/2)<1?i/2*t*t*((1+(r*=1.525))*t-r)+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn:function(t,e,i,n,r,o){var a=0;return 0===t?e:1==(t/=n)?e+i:(o=o||.3*n,a=!r||r<Math.abs(i)?(r=i,o/4):o/(2*Math.PI)*Math.asin(i/r),-(r*Math.pow(2,10*--t)*Math.sin(2*(t*n-a)*Math.PI/o))+e)},ElasticEaseOut:function(t,e,i,n,r,o){var a=0;return 0===t?e:1==(t/=n)?e+i:(o=o||.3*n,a=!r||r<Math.abs(i)?(r=i,o/4):o/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*n-a)*Math.PI/o)+i+e)},ElasticEaseInOut:function(t,e,i,n,r,o){var a=0;return 0===t?e:2==(t/=n/2)?e+i:(o=o||.3*n*1.5,a=!r||r<Math.abs(i)?(r=i,o/4):o/(2*Math.PI)*Math.asin(i/r),t<1?-.5*r*Math.pow(2,10*--t)*Math.sin(2*(t*n-a)*Math.PI/o)+e:r*Math.pow(2,-10*--t)*Math.sin(2*(t*n-a)*Math.PI/o)*.5+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-Kinetic.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return t<n/2?.5*Kinetic.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation(function(){var t=this.dirty;return this.dirty=!1,t}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,i=e.node;if(i){if(!e.isDragging){var n=i.getStage().getPointerPosition(),r=i.dragDistance();if(Math.max(Math.abs(n.x-e.startPointerPos.x),Math.abs(n.y-e.startPointerPos.y))<r)return}i._setDragPosition(t),e.isDragging||(e.isDragging=!0,i.fire("dragstart",{type:"dragstart",target:i,evt:t},!0)),i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)}},_endDragBefore:function(t){var e,i=Kinetic.DD,n=i.node;n&&(n.nodeType,e=n.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,i.justDragged=!0,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=n)),delete i.node,(e||n).draw())},_endDragAfter:function(t){var e=(t=t||{}).dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),i=this.getLayer(),n=e.getPointerPosition(),r=this.getAbsolutePosition();n&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=n,t.offset.x=n.x-r.x,t.offset.y=n.y-r.y,t.anim.setLayers(i||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e,i=Kinetic.DD,n=this.getStage().getPointerPosition(),r=this.getDragBoundFunc();n&&(e={x:n.x-i.offset.x,y:n.y-i.offset.y},void 0!==r&&(e=r.call(this,e,t)),this.setAbsolutePosition(e),this._lastPos&&this._lastPos.x===e.x&&this._lastPos.y===e.y||(i.anim.dirty=!0),this._lastPos=e)},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var e=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var t=Kinetic.DD;t.node&&t.node._id===this._id&&this.stopDrag(),e.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return!(!t.node||t.node._id!==this._id||!t.isDragging)},Kinetic.Node.prototype._listenDrag=function(){var e=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)}):this.on("mousedown.kinetic touchstart.kinetic",function(t){1!==t.evt.button&&2!==t.evt.button&&(Kinetic.DD.node||e.startDrag(t))})},Kinetic.Node.prototype._dragChange=function(){var t,e;this.attrs.draggable?this._listenDrag():(this._dragCleanup(),t=this.getStage(),e=Kinetic.DD,t&&e.node&&e.node._id===this._id&&e.node.stopDrag())},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var t=Kinetic.document.documentElement;t.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),t.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),t.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),t.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(e){if(e){var i=new Kinetic.Collection;return this.children.each(function(t){e(t)&&i.push(t)}),i}return this.children},hasChildren:function(){return 0<this.getChildren().length},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)delete(t=e[i]).parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)delete(t=e[i]).parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(t.getParent())return t.moveTo(this),this;var i=this.children;return this._validateAdd(t),t.index=i.length,t.parent=this,i.push(t),this._fire("add",{child:t}),t.isDragging()&&Kinetic.DD.anim.setLayers(t.getLayer()),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){for(var e,i,n,r,o,a,s=[],c=t.replace(/ /g,"").split(","),h=c.length,l=0;l<h;l++)if("#"===(i=c[l]).charAt(0))(r=this._getNodeById(i.slice(1)))&&s.push(r);else if("."===i.charAt(0))n=this._getNodesByName(i.slice(1)),s=s.concat(n);else for(a=(o=this.getChildren()).length,e=0;e<a;e++)s=s.concat(o[e]._get(i));return Kinetic.Collection.toCollection(s)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),i=this.getChildren(),n=i.length,r=0;r<n;r++)e=e.concat(i[r]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;n<i;n++){var r=e[n];t.children.push(r.toObject())}return t},_getDescendants:function(t){for(var e=[],i=t.length,n=0;n<i;n++){var r=t[n];this.isAncestorOf(r)&&e.push(r)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(e){var i=[];return this.find("Shape").each(function(t){t.isVisible()&&t.intersects(e)&&i.push(t)}),i},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas(),r=n&&n.getContext(),o=this._cache.canvas,a=o&&o.scene;return this.isVisible()&&(a?this._drawCachedSceneCanvas(r):this._drawChildren(n,"drawScene",e)),this},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas,r=n&&n.getContext(),o=this._cache.canvas,a=o&&o.hit;return this.shouldDrawHit(n)&&(i&&i.clearHitCache(),a?this._drawCachedHitCanvas(r):this._drawChildren(n,"drawHit",e)),this},_drawChildren:function(e,i,n){var t,r,o=this.getLayer(),a=e&&e.getContext(),s=this.getClipWidth(),c=this.getClipHeight(),h=s&&c;h&&o&&(t=this.getClipX(),r=this.getClipY(),a.save(),o._applyTransform(this,a),a.beginPath(),a.rect(t,r,s,c),a.clip(),a.reset()),this.children.each(function(t){t[i](e,n)}),h&&a.restore()},shouldDrawHit:function(t){var e=this.getLayer(),i=Kinetic.DD&&Kinetic.isDragging()&&-1!==Kinetic.DD.anim.getLayers().indexOf(e);return t&&t.isCache||e&&e.hitGraphEnabled()&&this.isVisible()&&!i}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container),function(){function n(t){t.fill()}function r(t){t.stroke()}function o(t){t.fill()}function a(t){t.stroke()}function s(){this._clearCache(t)}var t="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(t){this.nodeType="Shape",this._fillFunc=n,this._strokeFunc=r,this._fillFuncHit=o,this._strokeFuncHit=a;for(var e,i=Kinetic.shapes;!(e=Kinetic.Util.getRandomColor())||e in i;);i[this.colorKey=e]=this,Kinetic.Node.call(this,t),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",s)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(t,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},intersects:function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawScene(e),0<e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var i,n,r,o,a=this.getLayer(),s=t||a.getCanvas(),c=s.getContext(),h=this._cache.canvas,l=this.sceneFunc(),u=this.hasShadow();return this.isVisible()&&(h?this._drawCachedSceneCanvas(c):l&&(c.save(),this._useBufferCanvas()?((n=(i=this.getStage().bufferCanvas).getContext()).clear(),n.save(),n._applyLineJoin(this),a?a._applyTransform(this,n,e):(r=this.getAbsoluteTransform(e).getMatrix(),c.transform(r[0],r[1],r[2],r[3],r[4],r[5])),l.call(this,n),n.restore(),u&&!s.hitCanvas&&(c.save(),c._applyShadow(this),c.drawImage(i._canvas,0,0),c.restore()),c._applyOpacity(this),c.drawImage(i._canvas,0,0)):(c._applyLineJoin(this),a?a._applyTransform(this,c,e):(o=this.getAbsoluteTransform(e).getMatrix(),c.transform(o[0],o[1],o[2],o[3],o[4],o[5])),u&&!s.hitCanvas&&(c.save(),c._applyShadow(this),l.call(this,c),c.restore()),c._applyOpacity(this),l.call(this,c)),c.restore())),this},drawHit:function(t,e){var i,n=this.getLayer(),r=t||n.hitCanvas,o=r.getContext(),a=this.hitFunc()||this.sceneFunc(),s=this._cache.canvas,c=s&&s.hit;return this.shouldDrawHit(r)&&(n&&n.clearHitCache(),c?this._drawCachedHitCanvas(o):a&&(o.save(),o._applyLineJoin(this),n?n._applyTransform(this,o,e):(i=this.getAbsoluteTransform(e).getMatrix(),o.transform(i[0],i[1],i[2],i[3],i[4],i[5])),a.call(this,o),o.restore())),this},drawHitFromCache:function(t){var e,i,n,r,o,a,s=t||0,c=this._cache.canvas,h=this._getCachedSceneCanvas(),l=h.getContext(),u=c.hit.getContext(),d=h.getWidth(),f=h.getHeight();u.clear();try{for(e=l.getImageData(0,0,d,f).data,n=(i=u.getImageData(0,0,d,f)).data,r=e.length,o=Kinetic.Util._hexToRgb(this.colorKey),a=0;a<r;a+=4)s<e[a+3]&&(n[a]=o.r,n[a+1]=o.g,n[a+2]=o.b,n[a+3]=255);u.putImageData(i,0,0)}catch(t){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){var n="mouseout",r="mouseleave",o="mouseover",a="mousemove",i="mousedown",s="mouseup",c="touchstart",h="touchend",l="touchmove",u="mousewheel",d="_",e=[i,a,s,n,c,l,h,o,"DOMMouseScroll",u,"wheel"],f=e.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType="Stage",Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if("string"==typeof t){var e=t;if(!(t=Kinetic.document.getElementById(t)))throw"Can not find container in document with id "+e}return this._setAttr("container",t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){for(var t=this.children,e=t.length,i=0;i<e;i++)t[i].clear();return this},clone:function(t){return(t=t||{}).container=Kinetic.document.createElement("div"),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);-1<e&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(r){var o=(r=r||{}).mimeType||null,a=r.quality||null,t=r.x||0,e=r.y||0,s=new Kinetic.SceneCanvas({width:r.width||this.getWidth(),height:r.height||this.getHeight(),pixelRatio:1}),c=s.getContext()._context,h=this.children;(t||e)&&c.translate(-1*t,-1*e),function t(e){var i=h[e].toDataURL(),n=new Kinetic.window.Image;n.onload=function(){c.drawImage(n,0,0),e<h.length-1?t(e+1):r.callback(s.toDataURL(o,a))},n.src=i}(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){for(var e,i=this.getChildren(),n=i.length-1;0<=n;n--)if(e=i[n].getIntersection(t))return e;return null},_resizeDOM:function(){if(this.content){var t,e,i=this.getWidth(),n=this.getHeight(),r=this.getChildren(),o=r.length;for(this.content.style.width=i+"px",this.content.style.height=n+"px",this.bufferCanvas.setSize(i,n),this.bufferHitCanvas.setSize(i,n),t=0;t<o;t++)(e=r[t]).setSize(i,n),e.draw()}},add:function(t){if(!(1<arguments.length))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;for(var e=0;e<arguments.length;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var t=0;t<f;t++)!function(e,i){e.content.addEventListener(i,function(t){e[d+i](t)},!1)}(this,e[t])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire("contentMouseover",{evt:t}))},_mouseout:function(t){var e;Kinetic.UA.mobile||(this._setPointerPosition(t),(e=this.targetShape)&&!Kinetic.isDragging()&&(e._fireAndBubble(n,{evt:t}),e._fireAndBubble(r,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire("contentMouseout",{evt:t}))},_mousemove:function(t){if(Kinetic.UA.ieMobile)return this._touchmove(t);var e,i;(void 0!==t.webkitMovementX||void 0!==t.webkitMovementY)&&0===t.webkitMovementY&&0===t.webkitMovementX||Kinetic.UA.mobile||(this._setPointerPosition(t),i=Kinetic.DD,Kinetic.isDragging()||((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===e._id?e._fireAndBubble(a,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(n,{evt:t},e),this.targetShape._fireAndBubble(r,{evt:t},e)),e._fireAndBubble(o,{evt:t},this.targetShape),e._fireAndBubble("mouseenter",{evt:t},this.targetShape),this.targetShape=e):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(n,{evt:t}),this.targetShape._fireAndBubble(r,{evt:t}),this.targetShape=null),this._fire("contentMousemove",{evt:t})),i&&i._drag(t),t.preventDefault&&t.preventDefault())},_mousedown:function(t){if(Kinetic.UA.ieMobile)return this._touchstart(t);var e;Kinetic.UA.mobile||(this._setPointerPosition(t),e=this.getIntersection(this.getPointerPosition()),Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e)._fireAndBubble(i,{evt:t}),this._fire("contentMousedown",{evt:t})),t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(Kinetic.UA.ieMobile)return this._touchend(t);var e,i,n,r;Kinetic.UA.mobile||(this._setPointerPosition(t),e=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,n=!1,r=Kinetic.DD,Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):r&&r.justDragged?r&&(r.justDragged=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(s,{evt:t}),Kinetic.listenClickTap&&i&&i._id===e._id&&(e._fireAndBubble("click",{evt:t}),n&&e._fireAndBubble("dblclick",{evt:t}))),this._fire("contentMouseup",{evt:t}),Kinetic.listenClickTap&&(this._fire("contentClick",{evt:t}),n&&this._fire("contentDblclick",{evt:t})),Kinetic.listenClickTap=!1),t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&((this.tapStartShape=e)._fireAndBubble(c,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire("contentTouchstart",{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(h,{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble("tap",{evt:t}),i&&e._fireAndBubble("dbltap",{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire("contentTouchend",{evt:t}),i&&this._fire("contentDbltap",{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e,i=Kinetic.DD;Kinetic.isDragging()||((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()&&(e._fireAndBubble(l,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire("contentTouchmove",{evt:t})),i&&(i._drag(t),Kinetic.isDragging()&&t.preventDefault())},_DOMMouseScroll:function(t){this._mousewheel(t)},_mousewheel:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()&&e._fireAndBubble(u,{evt:t})},_wheel:function(t){this._mousewheel(t)},_setPointerPosition:function(t){var e,i=this._getContentPosition(),n=t.offsetX,r=t.clientX,o=null,a=null;void 0!==(t=t||window.event).touches?0<t.touches.length&&(o=(e=t.touches[0]).clientX-i.left,a=e.clientY-i.top):void 0!==n?(o=n,a=t.offsetY):"mozilla"===Kinetic.UA.browser?(o=t.layerX,a=t.layerY):void 0!==r&&i&&(o=r-i.left,a=t.clientY-i.top),null!==o&&null!==a&&(this.pointerPos={x:o,y:a})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has no container. A container is required.";t=Kinetic.document.createElement("div")}t.innerHTML="",this.content=Kinetic.document.createElement("div"),this.content.style.position="relative",this.content.style.display="inline-block",this.content.className="kineticjs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){for(var i,n=t.split(" "),r=n.length,o=0;o<r;o++)i=n[o],this.content.addEventListener(i,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},clearHitCache:function(){this._hitImageData=void 0},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){var t;!Kinetic.Node.prototype.moveUp.call(this)||(t=this.getStage())&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))},moveDown:function(){var t,e;!Kinetic.Node.prototype.moveDown.call(this)||(t=this.getStage())&&(e=t.getChildren(),t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas))},moveToBottom:function(){var t,e;!Kinetic.Node.prototype.moveToBottom.call(this)||(t=this.getStage())&&(e=t.getChildren(),t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas))},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent},setSize:function(t,e){this.canvas.setSize(t,e)},getWidth:function(){return this.parent?this.parent.getWidth():void 0},setWidth:function(){Kinetic.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},getHeight:function(){return this.parent?this.parent.getHeight():void 0},setHeight:function(){Kinetic.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer),function(){var s=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],c=s.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,i,n,r;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var o=1,a=!1;;){for(i=0;i<c;i++){if(n=s[i],r=(e=this._getIntersection({x:t.x+n.x*o,y:t.y+n.y*o})).shape)return r;e.antialiased&&(a=!0)}if(!a)return;o+=1}},_getImageData:function(t,e){var i=this.hitCanvas.width||1,n=this.hitCanvas.height||1,r=Math.round(e)*i+Math.round(t);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,i,n)),[this._hitImageData.data[4*r+0],this._hitImageData.data[4*r+1],this._hitImageData.data[4*r+2],this._hitImageData.data[4*r+3]]},_getIntersection:function(t){var e,i=this.hitCanvas.context.getImageData(t.x,t.y,1,1).data,n=i[3];return 255===n?(e=Kinetic.Util._rgbToHex(i[0],i[1],i[2]),{shape:Kinetic.shapes["#"+e]}):0<n?{antialiased:!0}:{}},drawScene:function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n,e),this._fire("draw",{node:this}),this},_applyTransform:function(t,e,i){var n=t.getAbsoluteTransform(i).getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.getClearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,n,e),this.imageData=null,this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this.imageData=null,this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(t,e){Kinetic.BaseLayer.prototype.setSize.call(this,t,e),this.hitCanvas.setSize(t,e)}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){"Shape"!==t.getType()&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),i=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&i.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,i),this},_applyTransform:function(t,e,i){var n;i&&i._id===this._id||(n=t.getTransform().getMatrix(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]))},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer),Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group),Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),i=this.getWidth(),n=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(i-e,0),t.arc(i-e,e,e,3*Math.PI/2,0,!1),t.lineTo(i,n-e),t.arc(i-e,n-e,e,0,Math.PI/2,!1),t.lineTo(e,n),t.arc(e,n-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect),function(){var e=2*Math.PI-1e-4;Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Circle",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,e,!1),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.radius()!==t/2&&this.setRadius(t/2)},setRadius:function(t){this._setAttr("radius",t),this.setWidth(2*t),this.setHeight(2*t)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetter(Kinetic.Circle,"radius",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Circle,"radius"),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var n=2*Math.PI-1e-4;Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ellipse",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getRadiusX(),i=this.getRadiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,n,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadiusX()},getHeight:function(){return 2*this.getRadiusY()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var e=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getInnerRadius(),0,e,!1),t.moveTo(this.getOuterRadius(),0),t.arc(0,0,this.getOuterRadius(),e,0,!0),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.outerRadius()!==t/2&&this.setOuterRadius(t/2)},setOuterRadius:function(t){this._setAttr("outerRadius",t),this.setWidth(2*t),this.setHeight(2*t)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetter(Kinetic.Ring,"outerRadius",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Ring,"outerRadius"),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge),Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=Kinetic.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,i),t.arc(0,0,this.getInnerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc),Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Image",this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(t){var e,i,n,r=this.getWidth(),o=this.getHeight(),a=this.getImage();a&&(e=this.getCropWidth(),i=this.getCropHeight(),n=e&&i?[a,this.getCropX(),this.getCropY(),e,i,0,0,r,o]:[a,0,0,r,o]),(this.hasFill()||this.hasStroke()||this.hasShadow())&&(t.beginPath(),t.rect(0,0,r,o),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,n)},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image),function(){function i(t){t.fillText(this.partialText,0,0)}function n(t){t.strokeText(this.partialText,0,0)}var k="auto",r=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],o=r.length,F=Kinetic.Util.createCanvasElement().getContext("2d");Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(t){(t=t||{}).fill=t.fill||"black",void 0===t.width&&(t.width=k),void 0===t.height&&(t.height=k),Kinetic.Shape.call(this,t),this._fillFunc=i,this._strokeFunc=n,this.className="Text";for(var e=0;e<o;e++)this.on(r[e]+"Change.kinetic",this._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,i=this.getPadding(),n=this.getTextHeight(),r=this.getLineHeight()*n,o=this.textArr,a=o.length,s=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save(),t.translate(i,0),t.translate(0,i+n/2),e=0;e<a;e++){var c=o[e],h=c.text,l=c.width;t.save(),"right"===this.getAlign()?t.translate(s-l-2*i,0):"center"===this.getAlign()&&t.translate((s-l-2*i)/2,0),this.partialText=h,t.fillStrokeShape(this),t.restore(),t.translate(0,r)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr("text",e),this},getWidth:function(){return this.attrs.width===k?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===k?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,i=F,n=this.getFontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+" "+this.getFontVariant()+" "+this.getFontSize()+"px "+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return F.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,n=this.getLineHeight()*e,r=this.attrs.width,o=this.attrs.height,a=r!==k,s=o!==k,c=this.getPadding(),h=r-2*c,l=o-2*c,u=0,d=this.getWrap(),f="none"!==d,p="char"!==d&&f;this.textArr=[],F.save(),F.font=this._getContextFont();for(var g=0,v=t.length;g<v;++g){var y=t[g],m=this._getTextWidth(y);if(a&&h<m)for(;0<y.length;){for(var _,x=0,K=y.length,b="",w=0;x<K;){var S=x+K>>>1,C=y.slice(0,1+S),T=this._getTextWidth(C);T<=h?(x=1+S,b=C,w=T):K=S}if(!b)break;if(!p||0<(_=Math.max(b.lastIndexOf(" "),b.lastIndexOf("-"))+1)&&(x=_,b=b.slice(0,x),w=this._getTextWidth(b)),this._addTextLine(b,w),i=Math.max(i,w),u+=n,!f||s&&l<u+n)break;if(0<(y=y.slice(x)).length&&(m=this._getTextWidth(y))<=h){this._addTextLine(y,m),u+=n,i=Math.max(i,m);break}}else this._addTextLine(y,m),u+=n,i=Math.max(i,m);if(s&&l<u+n)break}F.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle","normal"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant","normal"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align","left"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap","word"),Kinetic.Factory.addGetter(Kinetic.Text,"text",""),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,r=this.getPoints(),o=r.length,a=this.getTension(),s=this.getClosed();if(o){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==a&&4<o){for(i=(e=this.getTensionPoints()).length,n=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<i-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);s||t.quadraticCurveTo(e[i-2],e[i-1],r[o-2],r[o-1])}else for(n=2;n<o;n+=2)t.lineTo(r[n],r[n+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,i=this.getTension(),n=Kinetic.Util,r=n._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=n._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),a=Kinetic.Util._expandPoints(t,i);return[r[2],r[3]].concat(a).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],r[0],r[1],t[0],t[1]])}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points",[]),Kinetic.Collection.mapMethods(Kinetic.Line),Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this._updated=!0;var e=this;this.anim=new Kinetic.Animation(function(){var t=e._updated;return e._updated=!1,t}),this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameIndexChange.kinetic",function(){this._updated=!0}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,i,n=this.getAnimation(),r=this.frameIndex(),o=4*r,a=this.getAnimations()[n],s=this.frameOffsets(),c=a[0+o],h=a[1+o],l=a[2+o],u=a[3+o],d=this.getImage();d&&(s?(e=s[n],i=2*r,t.drawImage(d,c,h,l,u,e[0+i],e[1+i],l,u)):t.drawImage(d,c,h,l,u,0,0,l,u))},_hitFunc:function(t){var e,i,n=this.getAnimation(),r=this.frameIndex(),o=4*r,a=this.getAnimations()[n],s=this.frameOffsets(),c=a[2+o],h=a[3+o];t.beginPath(),s?(e=s[n],i=2*r,t.rect(e[0+i],e[1+i],c,h)):t.rect(0,0,c,h),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),i=this.getAnimations()[e].length/4;this.frameIndex(t<i-1?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameOffsets"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite),Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,i=!1;t.beginPath();for(var n=0;n<e.length;n++){var r=e[n].command,o=e[n].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],s=o[1],c=o[2],h=o[3],l=o[4],u=o[5],d=o[6],f=o[7],p=h<c?c:h,g=h<c?1:c/h,v=h<c?h/c:1;t.translate(a,s),t.rotate(d),t.scale(g,v),t.arc(0,0,p,l,l+u,1-f),t.scale(1/g,1/v),t.rotate(-d),t.translate(-a,-s);break;case"z":t.closePath(),i=!0}}i?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},Kinetic.Path.getPointOnLine=function(t,e,i,n,r,o,a){void 0===o&&(o=e),void 0===a&&(a=i);var s=(r-i)/(n-e+1e-8),c=Math.sqrt(t*t/(1+s*s));n<e&&(c*=-1);var h,l=s*c;if(n===e)h={x:o,y:a+l};else if((a-i)/(o-e+1e-8)==s)h={x:o+c,y:a+l};else{var u=this.getLineLength(e,i,n,r);if(u<1e-8)return;var d=(o-e)*(n-e)+(a-i)*(r-i),f=e+(d/=u*u)*(n-e),p=i+d*(r-i),g=this.getLineLength(o,a,f,p),v=Math.sqrt(t*t-g*g),c=Math.sqrt(v*v/(1+s*s));n<e&&(c*=-1),h={x:f+c,y:p+(l=s*c)}}return h},Kinetic.Path.getPointOnCubicBezier=function(t,e,i,n,r,o,a,s,c){function h(t){return t*t*t}function l(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:s*h(t)+o*l(t)+n*u(t)+e*d(t),y:c*h(t)+a*l(t)+r*u(t)+i*d(t)}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,i,n,r,o,a){function s(t){return t*t}function c(t){return 2*t*(1-t)}function h(t){return(1-t)*(1-t)}return{x:o*s(t)+n*c(t)+e*h(t),y:a*s(t)+r*c(t)+i*h(t)}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,i,n,r,o){var a=Math.cos(o),s=Math.sin(o),c=i*Math.cos(r),h=n*Math.sin(r);return{x:t+(c*a-h*s),y:e+(c*s+h*a)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];for(var e=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],i=(i=t).replace(new RegExp(" ","g"),","),n=0;n<e.length;n++)i=i.replace(new RegExp(e[n],"g"),"|"+e[n]);for(var r=i.split("|"),o=[],a=0,s=0,n=1;n<r.length;n++){var c=r[n],h=c.charAt(0),l=(c=(c=(c=(c=c.slice(1)).replace(new RegExp(",-","g"),"-")).replace(new RegExp("-","g"),",-")).replace(new RegExp("e,-","g"),"e-")).split(",");0<l.length&&""===l[0]&&l.shift();for(var u=0;u<l.length;u++)l[u]=parseFloat(l[u]);for(;0<l.length&&!isNaN(l[0]);){var d,f,p,g,v,y,m,_,x,K,b=null,w=[],S=a,C=s;switch(h){case"l":a+=l.shift(),s+=l.shift(),b="L",w.push(a,s);break;case"L":a=l.shift(),s=l.shift(),w.push(a,s);break;case"m":var T=l.shift(),k=l.shift();if(a+=T,s+=k,b="M",2<o.length&&"z"===o[o.length-1].command)for(var F=o.length-2;0<=F;F--)if("M"===o[F].command){a=o[F].points[0]+T,s=o[F].points[1]+k;break}w.push(a,s),h="l";break;case"M":a=l.shift(),s=l.shift(),b="M",w.push(a,s),h="L";break;case"h":a+=l.shift(),b="L",w.push(a,s);break;case"H":a=l.shift(),b="L",w.push(a,s);break;case"v":s+=l.shift(),b="L",w.push(a,s);break;case"V":s=l.shift(),b="L",w.push(a,s);break;case"C":w.push(l.shift(),l.shift(),l.shift(),l.shift()),a=l.shift(),s=l.shift(),w.push(a,s);break;case"c":w.push(a+l.shift(),s+l.shift(),a+l.shift(),s+l.shift()),a+=l.shift(),s+=l.shift(),b="C",w.push(a,s);break;case"S":f=a,p=s,"C"===(d=o[o.length-1]).command&&(f=a+(a-d.points[2]),p=s+(s-d.points[3])),w.push(f,p,l.shift(),l.shift()),a=l.shift(),s=l.shift(),b="C",w.push(a,s);break;case"s":f=a,p=s,"C"===(d=o[o.length-1]).command&&(f=a+(a-d.points[2]),p=s+(s-d.points[3])),w.push(f,p,a+l.shift(),s+l.shift()),a+=l.shift(),s+=l.shift(),b="C",w.push(a,s);break;case"Q":w.push(l.shift(),l.shift()),a=l.shift(),s=l.shift(),w.push(a,s);break;case"q":w.push(a+l.shift(),s+l.shift()),a+=l.shift(),s+=l.shift(),b="Q",w.push(a,s);break;case"T":f=a,p=s,"Q"===(d=o[o.length-1]).command&&(f=a+(a-d.points[0]),p=s+(s-d.points[1])),a=l.shift(),s=l.shift(),b="Q",w.push(f,p,a,s);break;case"t":f=a,p=s,"Q"===(d=o[o.length-1]).command&&(f=a+(a-d.points[0]),p=s+(s-d.points[1])),a+=l.shift(),s+=l.shift(),b="Q",w.push(f,p,a,s);break;case"A":g=l.shift(),v=l.shift(),y=l.shift(),m=l.shift(),_=l.shift(),x=a,K=s,a=l.shift(),s=l.shift(),b="A",w=this.convertEndpointToCenterParameterization(x,K,a,s,m,_,g,v,y);break;case"a":g=l.shift(),v=l.shift(),y=l.shift(),m=l.shift(),_=l.shift(),x=a,K=s,a+=l.shift(),s+=l.shift(),b="A",w=this.convertEndpointToCenterParameterization(x,K,a,s,m,_,g,v,y)}o.push({command:b||h,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,b||h,w)})}"z"!==h&&"Z"!==h||o.push({command:"z",points:[],start:void 0,pathLength:0})}return o},Kinetic.Path.calcLength=function(t,e,i,n){var r,o,a,s,c=Kinetic.Path;switch(i){case"L":return c.getLineLength(t,e,n[0],n[1]);case"C":for(r=0,o=c.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s=.01;s<=1;s+=.01)a=c.getPointOnCubicBezier(s,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case"Q":for(r=0,o=c.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),s=.01;s<=1;s+=.01)a=c.getPointOnQuadraticBezier(s,t,e,n[0],n[1],n[2],n[3]),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case"A":r=0;var h=n[4],l=n[5],u=n[4]+l,d=Math.PI/180;if(Math.abs(h-u)<d&&(d=Math.abs(h-u)),o=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),l<0)for(s=h-d;u<s;s-=d)a=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(s=h+d;s<u;s+=d)a=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),r+c.getLineLength(o.x,o.y,a.x,a.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,i,n,r,o,a,s,c){var h=c*(Math.PI/180),l=Math.cos(h)*(t-i)/2+Math.sin(h)*(e-n)/2,u=-1*Math.sin(h)*(t-i)/2+Math.cos(h)*(e-n)/2,d=l*l/(a*a)+u*u/(s*s);1<d&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((a*a*s*s-a*a*u*u-s*s*l*l)/(a*a*u*u+s*s*l*l));r===o&&(f*=-1),isNaN(f)&&(f=0);function p(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function g(t,e){return(t[0]*e[0]+t[1]*e[1])/(p(t)*p(e))}function v(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(g(t,e))}var y=f*a*u/s,m=f*-s*l/a,_=(t+i)/2+Math.cos(h)*y-Math.sin(h)*m,x=(e+n)/2+Math.sin(h)*y+Math.cos(h)*m,K=v([1,0],[(l-y)/a,(u-m)/s]),b=[(l-y)/a,(u-m)/s],w=[(-1*l-y)/a,(-1*u-m)/s],S=v(b,w);return g(b,w)<=-1&&(S=Math.PI),1<=g(b,w)&&(S=0),0===o&&0<S&&(S-=2*Math.PI),1===o&&S<0&&(S+=2*Math.PI),[_,x,a,s,K,S,h,o]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path),function(){function i(t){t.fillText(this.partialText,0,0)}function n(t){t.strokeText(this.partialText,0,0)}Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(t){var e=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,t),this._fillFunc=i,this._strokeFunc=n,this._fillFuncHit=i,this._strokeFuncHit=n,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",e._setTextData),e._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,i=0;i<e.length;i++){t.save();var n=e[i].p0;t.translate(n.x,n.y),t.rotate(e[i].rotation),this.partialText=e[i].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var h=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];function e(t){var e=h._getTextSize(t).width,i=0,n=0;for(u=void 0;.01<Math.abs(e-i)/e&&n<25;){n++;for(var r=i;void 0===d;)(d=function(){p=0;for(var t=h.dataArray,e=f+1;e<t.length;e++){if(0<t[e].pathLength)return t[f=e];"M"==t[e].command&&(l={x:t[e].points[0],y:t[e].points[1]})}return{}}())&&r+d.pathLength<e&&(r+=d.pathLength,d=void 0);if(d==={}||void 0===l)return;var o=!1;switch(d.command){case"L":Kinetic.Path.getLineLength(l.x,l.y,d.points[0],d.points[1])>e?u=Kinetic.Path.getPointOnLine(e,l.x,l.y,d.points[0],d.points[1],l.x,l.y):d=void 0;break;case"A":var a=d.points[4],s=d.points[5],c=d.points[4]+s;0===p?p=a+1e-8:i<e?p+=Math.PI/180*s/Math.abs(s):p-=Math.PI/360*s/Math.abs(s),(s<0&&p<c||0<=s&&c<p)&&(p=c,o=!0),u=Kinetic.Path.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],p,d.points[6]);break;case"C":0===p?p=e>d.pathLength?1e-8:e/d.pathLength:i<e?p+=(e-i)/d.pathLength:p-=(i-e)/d.pathLength,1<p&&(p=1,o=!0),u=Kinetic.Path.getPointOnCubicBezier(p,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===p?p=e/d.pathLength:i<e?p+=(e-i)/d.pathLength:p-=(i-e)/d.pathLength,1<p&&(p=1,o=!0),u=Kinetic.Path.getPointOnQuadraticBezier(p,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==u&&(i=Kinetic.Path.getLineLength(l.x,l.y,u.x,u.y)),o&&(o=!1,d=void 0)}}for(var l,u,d,i=this.attrs.text.split(""),f=-1,p=0,n=0;n<i.length&&(e(i[n]),void 0!==l&&void 0!==u);n++){var r=Kinetic.Path.getLineLength(l.x,l.y,u.x,u.y),o=Kinetic.Path.getPointOnLine(0+r/2,l.x,l.y,u.x,u.y),a=Math.atan2(u.y-l.y,u.x-l.x);this.glyphInfo.push({transposeX:o.x,transposeY:o.y,text:i[n],rotation:a,p0:l,p1:u}),l=u}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle","normal"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant","normal"),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",""),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,r=this.attrs.sides,o=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-o),e=1;e<r;e++)i=o*Math.sin(2*e*Math.PI/r),n=-1*o*Math.cos(2*e*Math.PI/r),t.lineTo(i,n);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon),Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var r=1;r<2*n;r++){var o=r%2==0?i:e,a=o*Math.sin(r*Math.PI/n),s=-1*o*Math.cos(r*Math.PI/n);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star),function(){var r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],o=r.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;Kinetic.Group.call(this,t),this.className="Label",this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(t){function e(){i._sync()}for(var i=this,n=0;n<o;n++)t.on(r[n]+"Change.kinetic",e)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,i,n,r,o,a,s=this.getText(),c=this.getTag();if(s&&c){switch(t=s.getWidth(),e=s.getHeight(),i=c.getPointerDirection(),n=c.getPointerWidth(),a=c.getPointerHeight(),o=r=0,i){case"up":r=t/2,o=-1*a;break;case"right":r=t+n,o=e/2;break;case"down":r=t/2,o=e+a;break;case"left":r=-1*n,o=e/2}c.setAttrs({x:-1*r,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*r,y:-1*o})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),i=this.getHeight(),n=this.getPointerDirection(),r=this.getPointerWidth(),o=this.getPointerHeight(),a=this.getCornerRadius();t.beginPath(),t.moveTo(0,0),"up"===n&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+r)/2,0)),a?(t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===n&&(t.lineTo(e,(i-o)/2),t.lineTo(e+r,i/2),t.lineTo(e,(i+o)/2)),a?(t.lineTo(e,i-a),t.arc(e-a,i-a,a,0,Math.PI/2,!1)):t.lineTo(e,i),"down"===n&&(t.lineTo((e+r)/2,i),t.lineTo(e/2,i+o),t.lineTo((e-r)/2,i)),a?(t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1)):t.lineTo(0,i),"left"===n&&(t.lineTo(0,(i+o)/2),t.lineTo(-1*r,i/2),t.lineTo(0,(i-o)/2)),a&&(t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection","none"),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),Kinetic.Arrow=function(t){this.____init(t)},Kinetic.Arrow.prototype={____init:function(t){Kinetic.Line.call(this,t),this.className="Arrow"},_sceneFunc:function(t){var e=2*Math.PI,i=this.points(),n=i.length,r=i[n-2]-i[n-4],o=i[n-1]-i[n-3],a=(Math.atan2(o,r)+e)%e,s=this.pointerLength(),c=this.pointerWidth();t.save(),t.beginPath(),t.translate(i[n-2],i[n-1]),t.rotate(a),t.moveTo(0,0),t.lineTo(-s,c/2),t.lineTo(-s,-c/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(i[0],i[1]),r=i[2]-i[0],o=i[3]-i[1],t.rotate((Math.atan2(-o,-r)+e)%e),t.moveTo(0,0),t.lineTo(-10,6),t.lineTo(-10,-6),t.closePath(),t.restore()),t.fillStrokeShape(this),Kinetic.Line.prototype._sceneFunc.apply(this,arguments)}},Kinetic.Util.extend(Kinetic.Arrow,Kinetic.Line),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,"pointerLength",10),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,"pointerWidth",10),Kinetic.Factory.addGetterSetter(Kinetic.Arrow,"pointerAtBeginning",!1),Kinetic.Collection.mapMethods(Kinetic.Arrow);